(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{346:function(t,s,a){"use strict";a.r(s);var v=a(14),_=Object(v.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("https://blog.csdn.net/qq_35423154/article/details/119516738")]),t._v(" "),s("h1",{attrs:{id:"权重计算原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#权重计算原理"}},[t._v("#")]),t._v(" 权重计算原理")]),t._v(" "),s("p",[t._v("在 Elasticsearch 中，每个文档都有相关性评分，用一个正浮点数字段 "),s("code",[t._v("_score")]),t._v(" 来表示 。 "),s("code",[t._v("_score")]),t._v(" 的评分越高，相关性越高。为了保证搜索到的结果相关度更高，在默认情况下返回结果会按照相关度降序排序。")]),t._v(" "),s("p",[t._v("Elasticsearch 使用"),s("strong",[t._v("布尔模型")]),t._v("查找匹配文档，并用一个名为"),s("strong",[t._v("实用评分函数")]),t._v("的公式来计算相关度。这个公式借鉴了"),s("strong",[t._v("词频/逆向文档频率")]),t._v("和"),s("strong",[t._v("向量空间模型")]),t._v("，同时也加入了一些现代的新特性，如"),s("strong",[t._v("协调因子")]),t._v("，"),s("strong",[t._v("字段长度归一化")]),t._v("，以及"),s("strong",[t._v("词或查询语句权重提升")]),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"布尔模型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#布尔模型"}},[t._v("#")]),t._v(" 布尔模型")]),t._v(" "),s("p",[t._v("布尔模型（Boolean Model） 适用于在查询中使用 AND 、 OR 和 NOT （与、或、非）这样的条件来查找匹配的文档，如以下查询：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("full AND text AND search AND (elasticsearch OR lucene)\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("会将所有包括词 full 、 text 和 search ，以及 elasticsearch 或 lucene 的文档作为结果集。")]),t._v(" "),s("p",[t._v("这个过程简单且快速，它将所有可能不匹配的文档排除在外。")]),t._v(" "),s("h2",{attrs:{id:"词频-逆向文档频率-tf-idf"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#词频-逆向文档频率-tf-idf"}},[t._v("#")]),t._v(" 词频/逆向文档频率（TF/IDF）")]),t._v(" "),s("h3",{attrs:{id:"检索词频率"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#检索词频率"}},[t._v("#")]),t._v(" "),s("strong",[t._v("检索词频率")])]),t._v(" "),s("p",[t._v("Term Frequency")]),t._v(" "),s("p",[s("strong",[t._v("检索词在该字段出现的频率")]),t._v("。出现频率越高，相关性也越高。5 次提到同一词的字段比只提到 1 次的更相关。")]),t._v(" "),s("p",[t._v("计算方式：")]),t._v(" "),s("p",[t._v("tf(t in d) = √frequency")]),t._v(" "),s("h3",{attrs:{id:"逆向文档频率"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#逆向文档频率"}},[t._v("#")]),t._v(" "),s("strong",[t._v("逆向文档频率")])]),t._v(" "),s("p",[t._v("Reverse document frequency")]),t._v(" "),s("p",[s("strong",[t._v("每个检索词在索引中出现的频率")]),t._v("。频率越高，相关性越低。检索词出现在多数文档中会比出现在少数文档中的权重更低。")]),t._v(" "),s("p",[t._v("计算方式：")]),t._v(" "),s("p",[s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",[s("semantics",[s("mrow",[s("mi",[t._v("i")]),s("mi",[t._v("d")]),s("mi",[t._v("f")]),s("mo",[t._v("(")]),s("mi",[t._v("t")]),s("mo",[t._v(")")]),s("mo",[t._v("=")]),s("mn",[t._v("1")]),s("mo",[t._v("+")]),s("mi",[t._v("l")]),s("mi",[t._v("o")]),s("mi",[t._v("g")]),s("mo",[t._v("(")]),s("mi",[t._v("n")]),s("mi",[t._v("u")]),s("mi",[t._v("m")]),s("mi",[t._v("D")]),s("mi",[t._v("o")]),s("mi",[t._v("c")]),s("mi",[t._v("s")]),s("mi",{attrs:{mathvariant:"normal"}},[t._v("/")]),s("mo",[t._v("(")]),s("mi",[t._v("d")]),s("mi",[t._v("o")]),s("mi",[t._v("c")]),s("mi",[t._v("F")]),s("mi",[t._v("r")]),s("mi",[t._v("e")]),s("mi",[t._v("q")]),s("mo",[t._v("+")]),s("mn",[t._v("1")]),s("mo",[t._v(")")]),s("mo",[t._v(")")])],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("idf(t) = 1 + log ( numDocs / (docFreq + 1))")])],1)],1)],1),s("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"strut",staticStyle:{height:"0.75em"}}),s("span",{staticClass:"strut bottom",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),s("span",{staticClass:"base textstyle uncramped"},[s("span",{staticClass:"mord mathit"},[t._v("i")]),s("span",{staticClass:"mord mathit"},[t._v("d")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.10764em"}},[t._v("f")]),s("span",{staticClass:"mopen"},[t._v("(")]),s("span",{staticClass:"mord mathit"},[t._v("t")]),s("span",{staticClass:"mclose"},[t._v(")")]),s("span",{staticClass:"mrel"},[t._v("=")]),s("span",{staticClass:"mord mathrm"},[t._v("1")]),s("span",{staticClass:"mbin"},[t._v("+")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),s("span",{staticClass:"mord mathit"},[t._v("o")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),s("span",{staticClass:"mopen"},[t._v("(")]),s("span",{staticClass:"mord mathit"},[t._v("n")]),s("span",{staticClass:"mord mathit"},[t._v("u")]),s("span",{staticClass:"mord mathit"},[t._v("m")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("D")]),s("span",{staticClass:"mord mathit"},[t._v("o")]),s("span",{staticClass:"mord mathit"},[t._v("c")]),s("span",{staticClass:"mord mathit"},[t._v("s")]),s("span",{staticClass:"mord mathrm"},[t._v("/")]),s("span",{staticClass:"mopen"},[t._v("(")]),s("span",{staticClass:"mord mathit"},[t._v("d")]),s("span",{staticClass:"mord mathit"},[t._v("o")]),s("span",{staticClass:"mord mathit"},[t._v("c")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.13889em"}},[t._v("F")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("r")]),s("span",{staticClass:"mord mathit"},[t._v("e")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[t._v("q")]),s("span",{staticClass:"mbin"},[t._v("+")]),s("span",{staticClass:"mord mathrm"},[t._v("1")]),s("span",{staticClass:"mclose"},[t._v(")")]),s("span",{staticClass:"mclose"},[t._v(")")])])])])]),t._v(" "),s("h3",{attrs:{id:"字段长度归一值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字段长度归一值"}},[t._v("#")]),t._v(" "),s("strong",[t._v("字段长度归一值")])]),t._v(" "),s("p",[s("strong",[t._v("字段的长度")]),t._v("。长度越长，相关性越低。 检索词出现在一个短的 title 要比同样的词出现在一个长的 content 字段权重更大。")]),t._v(" "),s("p",[t._v("字段长度的归一值公式")]),t._v(" "),s("p",[t._v("norm(d) = 1 / √numTerms")]),t._v(" "),s("p",[t._v("字段长度归一值（ "),s("code",[t._v("norm")]),t._v(" ）是字段中词数平方根的倒数。")]),t._v(" "),s("h2",{attrs:{id:"向量空间模型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#向量空间模型"}},[t._v("#")]),t._v(" 向量空间模型")]),t._v(" "),s("h1",{attrs:{id:"文本分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文本分析"}},[t._v("#")]),t._v(" 文本分析")]),t._v(" "),s("h2",{attrs:{id:"分析与分析器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分析与分析器"}},[t._v("#")]),t._v(" 分析与分析器")]),t._v(" "),s("h3",{attrs:{id:"分析包含以下两个流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分析包含以下两个流程"}},[t._v("#")]),t._v(" 分析包含以下两个流程：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("将一块文本分成适合于倒排索引的独立的词条")])]),t._v(" "),s("li",[s("p",[t._v("将这些词条统一化为标准格式以提高它们的可搜索性，或者 recall\n分析器执行上面的工作。 分析器实际上是将三个功能封装到了一个包里：")])]),t._v(" "),s("li",[s("p",[t._v("字符过滤器：字符串按顺序通过每个字符过滤器 。他们的任务是在分词前整理字符串。一个字符过滤器可以用来去掉 HTML，或者将 & 转化成 and。")])]),t._v(" "),s("li",[s("p",[t._v("分词器：字符串被分词器拆分为单个的词条。一个简单的分词器遇到空格和标点的时候，可能会将文本拆分成词条。")])])])])}),[],!1,null,null,null);s.default=_.exports}}]);