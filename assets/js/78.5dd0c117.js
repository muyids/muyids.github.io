(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{351:function(t,s,a){"use strict";a.r(s);var e=a(14),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"准备环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备环境"}},[t._v("#")]),t._v(" 准备环境")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("es 集群别名")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("节点名称")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("IP 地址")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("master")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("AI-DEV-02")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("129.0.4.37")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("node1")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("AI-DEV-03")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("129.0.4.38")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("node2")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("AI-DEV-04")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("129.0.4.39")])])])]),t._v(" "),s("ul",[s("li",[t._v("java 版本: 1.8.0")]),t._v(" "),s("li",[t._v("elasticsearch 版本: 7.9.0")])]),t._v(" "),s("h2",{attrs:{id:"集群节点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#集群节点"}},[t._v("#")]),t._v(" 集群节点")]),t._v(" "),s("p",[s("code",[t._v("Elasticsearch")]),t._v("的集群是由多个节点组成的，通过"),s("code",[t._v("cluster.name")]),t._v("设置集群名称，并且用于区分其它的集群，每个节点\n通过"),s("code",[t._v("node.name")]),t._v("指定节点的名称。\n在"),s("code",[t._v("Elasticsearch")]),t._v("中，节点的类型主要有 4 种：")]),t._v(" "),s("ul",[s("li",[t._v("master 节点\n"),s("ul",[s("li",[t._v("配置文件中"),s("code",[t._v("node.master")]),t._v("属性为 true(默认为 true)，就有资格被选为 master 节点。")]),t._v(" "),s("li",[t._v("master 节点用于控制整个集群的操作。比如创建或删除索引，管理其它非 master 节点等。")])])]),t._v(" "),s("li",[t._v("data 节点\n"),s("ul",[s("li",[t._v("配置文件中"),s("code",[t._v("node.data")]),t._v("属性为 true(默认为 true)，就有资格被设置成 data 节点。")]),t._v(" "),s("li",[t._v("data 节点主要用于执行数据相关的操作。比如文档的 CRUD。")])])]),t._v(" "),s("li",[t._v("客户端节点\n"),s("ul",[s("li",[t._v("配置文件中"),s("code",[t._v("node.master")]),t._v("属性和"),s("code",[t._v("node.data")]),t._v("属性均为 false。")]),t._v(" "),s("li",[t._v("该节点不能作为 master 节点，也不能作为 data 节点。")]),t._v(" "),s("li",[t._v("可以作为客户端节点，用于响应用户的请求，把请求转发到其他节点")])])]),t._v(" "),s("li",[t._v("部落节点\n"),s("ul",[s("li",[t._v("当一个节点配置"),s("code",[t._v("tribe.*")]),t._v("的时候，它是一个特殊的客户端，它可以连接多个集群，在所有连接的集群上执行搜索和其他操作。")])])])]),t._v(" "),s("h2",{attrs:{id:"搭建集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搭建集群"}},[t._v("#")]),t._v(" 搭建集群")]),t._v(" "),s("h3",{attrs:{id:"下载-解压"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载-解压"}},[t._v("#")]),t._v(" 下载&解压")]),t._v(" "),s("p",[t._v("参考单机版安装")]),t._v(" "),s("h3",{attrs:{id:"分发到其它机器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分发到其它机器"}},[t._v("#")]),t._v(" 分发到其它机器")]),t._v(" "),s("div",{staticClass:"language-shell script line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" /app/elasticsearch-7.9.0 root@129.0.4.38:/app\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" /app/elasticsearch-7.9.0 root@129.0.4.39:/app\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h3",{attrs:{id:"修改配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[t._v("#")]),t._v(" 修改配置文件")]),t._v(" "),s("div",{staticClass:"language-shell script line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" config/elasticsearch.yml\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h4",{attrs:{id:"master-的配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#master-的配置"}},[t._v("#")]),t._v(" master 的配置")]),t._v(" "),s("div",{staticClass:"language-shell script line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("cluster.name: es-fltrp-dev\nnode.name: master\nnode.master: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\nnode.data: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\npath.data: /data/esData\nnetwork.host: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0\nhttp.port: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9200")]),t._v("\ndiscovery.seed_hosts: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"129.0.4.37:9300"')]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"129.0.4.38:9300"')]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"129.0.4.39:9300"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ncluster.initial_master_nodes: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"master"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nhttp.cors.enabled: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\nhttp.cors.allow-origin: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("h4",{attrs:{id:"slave-的配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#slave-的配置"}},[t._v("#")]),t._v(" slave 的配置")]),t._v(" "),s("div",{staticClass:"language-shell script line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("cluster.name: es-fltrp-dev\nnode.name: node1 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# name必须唯一；另一台node2")]),t._v("\nnode.master: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\nnode.data: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\npath.data: /data/esData\nnetwork.host: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0\nhttp.port: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9200")]),t._v("\ndiscovery.seed_hosts: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"129.0.4.37:9300"')]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"129.0.4.38:9300"')]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"129.0.4.39:9300"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# cluster.initial_master_nodes: ["master"] # slave节点不能配置此项')]),t._v("\nhttp.cors.enabled: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\nhttp.cors.allow-origin: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("h3",{attrs:{id:"启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[t._v("#")]),t._v(" 启动")]),t._v(" "),s("div",{staticClass:"language-shell script line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" elsearch\n/app/elasticsearch-7.9.0/bin/elasticsearch "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);