(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{478:function(s,a,e){"use strict";e.r(a);var t=e(14),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"服务启动和停止"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务启动和停止"}},[s._v("#")]),s._v(" "),a("strong",[s._v("服务启动和停止")])]),s._v(" "),a("h2",{attrs:{id:"kafka-启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kafka-启动"}},[s._v("#")]),s._v(" kafka 启动")]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JMX_PORT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9999")]),s._v(" /app/kafka_2.12-2.5.0/bin/kafka-server-start.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-daemon")]),s._v(" /app/kafka_2.12-2.5.0/config/server.properties\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"kafka-停止"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kafka-停止"}},[s._v("#")]),s._v(" kafka 停止")]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("/app/kafka_2.12-2.5.0/bin/kafka-server-stop.sh stop\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("指定 server")]),s._v(" "),a("p",[s._v("开发环境")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("--zookeeper 129.0.4.37:2181,129.0.4.38:2181,129.0.4.39:2181")])]),s._v(" "),a("li",[a("p",[s._v("--bootstrap-server 129.0.4.37:9092,129.0.4.38:9092,129.0.4.39:9092\n测试环境：")])]),s._v(" "),a("li",[a("p",[s._v("--zookeeper 129.0.4.32:2181,129.0.4.33:2181,129.0.4.34:2181")])]),s._v(" "),a("li",[a("p",[s._v("--bootstrap-server 129.0.4.32:9092,129.0.4.33:9092,129.0.4.34:9092\nhttps://exam.weicewang.com/kaowu/?notify_id=11790&t=1669341520#/adt")])])]),s._v(" "),a("h1",{attrs:{id:"topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#topic"}},[s._v("#")]),s._v(" topic")]),s._v(" "),a("h2",{attrs:{id:"查看当前服务器中所有-topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看当前服务器中所有-topic"}},[s._v("#")]),s._v(" 查看当前服务器中所有 topic")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-topics.sh --zookeeper localhost:2181 --list\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"查看某个-topic-的详情"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看某个-topic-的详情"}},[s._v("#")]),s._v(" 查看某个 Topic 的详情")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-topics.sh --describe --bootstrap-server 129.0.4.32:9092 --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("或者")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-topics.sh --describe --zookeeper 129.0.4.32:2181 --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"创建-topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-topic"}},[s._v("#")]),s._v(" 创建 topic")]),s._v(" "),a("p",[s._v("topic 的创建要通过 zookpeer 来创建")]),s._v(" "),a("p",[s._v("1 个副本集，1 个分区")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-topics.sh --zookeeper localhost:2181 --create --replication-factor 1 --partitions 1 --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("3 个副本集，10 个分区")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-topics.sh --zookeeper 129.0.4.32:2181 --create --replication-factor 3 --partitions 10 --topic second\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("选项说明:")]),s._v(" "),a("ul",[a("li",[s._v("--topic 定义 topic 名称")]),s._v(" "),a("li",[s._v("--replication-factor 定义副本数(副本数不超过机器数)")]),s._v(" "),a("li",[s._v("--partitions 定义分区数(提高并发)")])]),s._v(" "),a("h2",{attrs:{id:"删除-topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除-topic"}},[s._v("#")]),s._v(" 删除 topic")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-topics.sh --zookeeper 129.0.4.32:2181 --delete --topic second\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("注：")])]),s._v(" "),a("ul",[a("li",[s._v("删除 topic 操作，需要"),a("code",[s._v("server.properties")]),s._v("中设置"),a("code",[s._v("delete.topic.enable=true")]),s._v("，否则只是标记删除。")])]),s._v(" "),a("h3",{attrs:{id:"修改-topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-topic"}},[s._v("#")]),s._v(" 修改 topic")]),s._v(" "),a("h4",{attrs:{id:"修改分区数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改分区数"}},[s._v("#")]),s._v(" 修改分区数")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-topics.sh --bootstrap-server localhost:9092 --alter --topic first --partitions 6\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h1",{attrs:{id:"消息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#消息"}},[s._v("#")]),s._v(" 消息")]),s._v(" "),a("ul",[a("li",[s._v("生产消息命令：kafka-console-producer.sh")]),s._v(" "),a("li",[s._v("消费消息命令：kafka-console-consumer.sh")])]),s._v(" "),a("h2",{attrs:{id:"生产者"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生产者"}},[s._v("#")]),s._v(" 生产者")]),s._v(" "),a("p",[s._v("发送消息")]),s._v(" "),a("p",[s._v("创建生产者长连接：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-console-producer.sh --broker-list 129.0.4.32:9092 --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("发送消息到指定分区")]),s._v(" "),a("h2",{attrs:{id:"消费者"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#消费者"}},[s._v("#")]),s._v(" 消费者")]),s._v(" "),a("p",[s._v("消费者可以用不同的方式进行消费")]),s._v(" "),a("h5",{attrs:{id:"默认消费模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#默认消费模式"}},[s._v("#")]),s._v(" 默认消费模式")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-console-consumer.sh --bootstrap-server 129.0.4.32:9092 --topic first\nkafka-console-consumer.sh --bootstrap-server 127.0.0.1:9092 --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h5",{attrs:{id:"从头消费"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从头消费"}},[s._v("#")]),s._v(" 从头消费")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-console-consumer.sh --bootstrap-server 129.0.4.32:9092 --from-beginning --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"指定-group-消费"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指定-group-消费"}},[s._v("#")]),s._v(" 指定 group 消费")]),s._v(" "),a("p",[s._v("group 是消费者的最小单元")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-console-consumer.sh --bootstrap-server 129.0.4.32:9092 --group fltrp_nodejs_group --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"指定分区消费"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指定分区消费"}},[s._v("#")]),s._v(" 指定分区消费")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-console-consumer.sh --bootstrap-server 129.0.4.32:9092 --partition 0 --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"指定-offset-消费"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指定-offset-消费"}},[s._v("#")]),s._v(" 指定 offset 消费")]),s._v(" "),a("p",[s._v("指定 offset 时，必须指定分区")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-console-consumer.sh --bootstrap-server 129.0.4.32:9092 --partition 0 --offset 0 --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("选项：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("--from-beginning: 会把主题中以往所有的数据都读取出来")])]),s._v(" "),a("li",[a("p",[s._v("--group <String: consumer group id> The consumer group id of the consumer.")])]),s._v(" "),a("li",[a("p",[s._v("--partition <Integer: partition> The partition to consume from. Consumption starts from the end of the partition unless '--offset' is specified.")])]),s._v(" "),a("li",[a("p",[s._v("--offset <String: consume offset> The offset id to consume from (a non-negative number), or 'earliest' which means from beginning, or 'latest' which means from end (default: latest)\n注意：")])]),s._v(" "),a("li",[a("p",[s._v("The partition is required when offset is specified.")])])]),s._v(" "),a("h5",{attrs:{id:"offset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#offset"}},[s._v("#")]),s._v(" offset")]),s._v(" "),a("h5",{attrs:{id:"查看-group-的消费进度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看-group-的消费进度"}},[s._v("#")]),s._v(" 查看 group 的消费进度")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-consumer-offset-checker --bootstrap-server localhost:9092 --group fltrp_nodejs_group  --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);