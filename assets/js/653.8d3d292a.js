(window.webpackJsonp=window.webpackJsonp||[]).push([[653],{927:function(s,n,a){"use strict";a.r(n);var e=a(14),i=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"蓄水池抽样算法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#蓄水池抽样算法"}},[s._v("#")]),s._v(" 蓄水池抽样算法")]),s._v(" "),n("h2",{attrs:{id:"问题引入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#问题引入"}},[s._v("#")]),s._v(" 问题引入")]),s._v(" "),n("p",[s._v("我们如何从一个文件中随机选择一行")]),s._v(" "),n("ol",[n("li",[s._v("每一行被选择的概率一样大")]),s._v(" "),n("li",[s._v("文件很大，我们不能把整个文件加载到内存中")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("i = 0     # 当前读到的行数\ns = null  # 最终要选择的哪一行；中奖池\nfor line in 文本文件 :\n  i = i + 1\n  r = 生成[0,1)之间的随机数  # 以1/i的概率将s替换成第i行\n  if r < 1/i :\n    s = line              # 结束：s随机指向任何一行\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("问题扩展，如何从一个文件中随机选择 K 行？")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("i=0\ns=[] # 下标从1开始；中奖池\nfor line in 文本文件：\n  i=i+1\n  if i<=K :\n    s.append(line)\n  else\n    j = [1,i] 间的随机整数\n    if j<=K:\n      s[j]=line\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])])])}),[],!1,null,null,null);n.default=i.exports}}]);