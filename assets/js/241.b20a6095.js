(window.webpackJsonp=window.webpackJsonp||[]).push([[241],{516:function(a,s,t){"use strict";t.r(s);var e=t(14),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"目前已有组件及功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目前已有组件及功能"}},[a._v("#")]),a._v(" 目前已有组件及功能")]),a._v(" "),s("p",[a._v("目前已有的组件其功能都比较简单，没有添加太多内容，需要大家共同讨论决定，以获取 best practice")]),a._v(" "),s("ul",[s("li",[a._v("cloud 版本：H.SR5")]),a._v(" "),s("li",[a._v("boot 版本：2.2.1")])]),a._v(" "),s("h2",{attrs:{id:"commons"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#commons"}},[a._v("#")]),a._v(" commons")]),a._v(" "),s("p",[a._v("主要内容为：")]),a._v(" "),s("ul",[s("li",[a._v("常量定义")]),a._v(" "),s("li",[a._v("枚举")]),a._v(" "),s("li",[a._v("微服务间数据交互的实体定义,目前还是定义在公共的包中，其他服务")]),a._v(" "),s("li",[a._v("通用异常，如业务异常的基类放在该包中，其他服务异常继承自该基类")])]),a._v(" "),s("h2",{attrs:{id:"web"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#web"}},[a._v("#")]),a._v(" web")]),a._v(" "),s("p",[a._v("服务类型为 web 的公共抽象，主要内容包括")]),a._v(" "),s("ul",[s("li",[a._v("统一的返回数据格式 code message data")]),a._v(" "),s("li",[a._v("默认值问题，后端尽量不返回 null 对象，但基于健壮性考量，前后端在使用数据前都需判断")]),a._v(" "),s("li",[a._v("异常拦截统一处理")]),a._v(" "),s("li",[a._v("web 常用异常定义")])]),a._v(" "),s("h2",{attrs:{id:"redis"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis"}},[a._v("#")]),a._v(" redis")]),a._v(" "),s("ul",[s("li",[a._v("看外研在线提供的框架中的 redis 相关模块是否可以复用")]),a._v(" "),s("li",[a._v("value 的序列化处理方式，需要考虑异构的问题，GenericJackson2JsonRedisSerializer 可能不满足需求，考虑使用 Jackson2JsonRedisSerializer")]),a._v(" "),s("li",[a._v("key 的序列化和反序列化默认为 string")])]),a._v(" "),s("h2",{attrs:{id:"db"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#db"}},[a._v("#")]),a._v(" db")]),a._v(" "),s("ul",[s("li",[a._v("包含了数据库的分页功能，pageHelper 插件")]),a._v(" "),s("li",[a._v("定义了分页返回结果格式")]),a._v(" "),s("li",[a._v("定义了分页工具类")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/CCmemtPsSvW32vIO.png",alt:"数据库的分页功能"}})]),a._v(" "),s("h1",{attrs:{id:"约定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#约定"}},[a._v("#")]),a._v(" 约定：")]),a._v(" "),s("h2",{attrs:{id:"通用业务异常"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通用业务异常"}},[a._v("#")]),a._v(" 通用业务异常")]),a._v(" "),s("p",[a._v("通用的业务异常目前是定义在 web 模块中，需移到 commons 包中")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/N92StSgwnQrf3sVa.png!thumbnail",alt:"img"}})]),a._v(" "),s("p",[a._v("每个服务的错误码段"),s("code",[a._v("1001-1999、2001-2999...")])]),a._v(" "),s("p",[a._v("看原来的错误码定义，避免冲突")]),a._v(" "),s("p",[a._v("输出统一维护文档")]),a._v(" "),s("h2",{attrs:{id:"关于事务注解-transactional"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关于事务注解-transactional"}},[a._v("#")]),a._v(" 关于事务注解@Transactional")]),a._v(" "),s("p",[a._v("注解加载具体的方法上，不要加在类上，也不要加载接口上")]),a._v(" "),s("h2",{attrs:{id:"rest-接口命名及约定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rest-接口命名及约定"}},[a._v("#")]),a._v(" Rest 接口命名及约定")]),a._v(" "),s("p",[a._v("对前端接口，严格遵循 rest 规范")]),a._v(" "),s("ul",[s("li",[a._v("rest 规范")])]),a._v(" "),s("p",[a._v("特殊的接口除外")]),a._v(" "),s("p",[a._v("login logout 等")]),a._v(" "),s("p",[a._v("后端 service dao 阿里建议：")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/EttazcpD9XAjjHJ5.png!thumbnail",alt:"图片"}})]),a._v(" "),s("ul",[s("li",[a._v("对外服务、对前端服务，接口要有版本号 "),s("code",[a._v("/api/**v1****/**teacher")])])]),a._v(" "),s("h2",{attrs:{id:"_2-4-项目包结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-项目包结构"}},[a._v("#")]),a._v(" 2.4 项目包结构")]),a._v(" "),s("p",[a._v("代码：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("com.xxx.yyy.zzz.config\n\ncom.xxx.yyy.zzz.mapper\n\ncom.xxx.yyy.zzz.controller\n\ncom.xxx.yyy.zzz.constant\n\ncom.xxx.yyy.zzz.exception\n\ncom.xxx.yyy.zzz.service\n\ncom.xxx.yyy.zzz.service.impl\n\ncom.xxx.yyy.zzz.utils\n\ncom.xxx.yyy.zzz.entity.teacher.teacherDO\n")])])]),s("p",[a._v("配置：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("resources/application.yml\n\nresources/application-dev.yml\n\nresources/application-test.yml\n\nresources/application-prod.yml\n\nresources/bootstrap.yml\n\nresources/bootstrap-dev.yml\n\n....\n")])])]),s("p",[a._v("可使用 maven profile 按环境打包，这样不同环境部署脚本或方式是一致的")]),a._v(" "),s("p",[a._v("静态资源：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("resources/static/\n\nresources/mapper/\n")])])]),s("h2",{attrs:{id:"日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#日志"}},[a._v("#")]),a._v(" 日志")]),a._v(" "),s("p",[a._v("见阿里日志规约")]),a._v(" "),s("h2",{attrs:{id:"数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库"}},[a._v("#")]),a._v(" 数据库")]),a._v(" "),s("h3",{attrs:{id:"mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql"}},[a._v("#")]),a._v(" mysql:")]),a._v(" "),s("ul",[s("li",[a._v("时区，统一为东八区：")])]),a._v(" "),s("div",{staticClass:"language-plain line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-plain"}},[s("code",[a._v("serverTimezone=Asia/Shanghai&allowMultiQueries=true&characterEncoding=UTF-8\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("数据库字符集: utf8mb4")]),a._v(" "),s("li",[a._v("排序规则: utf8mb4_general_ci")]),a._v(" "),s("li",[a._v("连接池 : druid")])]),a._v(" "),s("h3",{attrs:{id:"redis-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis-2"}},[a._v("#")]),a._v(" redis")]),a._v(" "),s("ul",[s("li",[a._v("redis 连接池：lettuce")])]),a._v(" "),s("h2",{attrs:{id:"微服务在服务注册于发现中的名称"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微服务在服务注册于发现中的名称"}},[a._v("#")]),a._v(" 微服务在服务注册于发现中的名称")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("dera-homework\n\ndera-basedw\n")])])]),s("h1",{attrs:{id:"上线内容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上线内容"}},[a._v("#")]),a._v(" 上线内容")]),a._v(" "),s("p",[a._v("微服务最近一个上线时间点是 8 月底的 新标准 0.8 需求，我们要上的内容")]),a._v(" "),s("ul",[s("li",[a._v("服务注册与发现---------------------- "),s("RouterLink",{attrs:{to:"/micro-service/配置中心/Nacos.html"}},[a._v("nacos")])],1),a._v(" "),s("li",[a._v("微服务网关---------------------------- gateway")]),a._v(" "),s("li",[a._v("服务间调用---------------------------- openfeign")])]),a._v(" "),s("p",[a._v("--------------------------待定-----------------------------------")]),a._v(" "),s("ul",[s("li",[a._v("配置中心---------------------------- nacos")]),a._v(" "),s("li",[a._v("熔断限流---------------------------- sentinel")]),a._v(" "),s("li",[a._v("链路追踪---------------------------- skywalking")]),a._v(" "),s("li",[a._v("消息系统---------------------------- kafka")])])])}),[],!1,null,null,null);s.default=r.exports}}]);