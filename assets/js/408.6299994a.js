(window.webpackJsonp=window.webpackJsonp||[]).push([[408],{682:function(a,t,s){"use strict";s.r(t);var r=s(14),v=Object(r.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"k8s-快速入门"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#k8s-快速入门"}},[a._v("#")]),a._v(" k8s 快速入门")]),a._v(" "),t("h2",{attrs:{id:"概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[a._v("#")]),a._v(" 概念")]),a._v(" "),t("h3",{attrs:{id:"资源对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#资源对象"}},[a._v("#")]),a._v(" 资源对象")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/image-20220513144731800.png",alt:"image-20220513144731800"}})]),a._v(" "),t("h3",{attrs:{id:"服务调度和编排"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务调度和编排"}},[a._v("#")]),a._v(" 服务调度和编排")]),a._v(" "),t("h4",{attrs:{id:"健康检查"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#健康检查"}},[a._v("#")]),a._v(" 健康检查")]),a._v(" "),t("p",[a._v("参数如何配置和优化")]),a._v(" "),t("h4",{attrs:{id:"调度策略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#调度策略"}},[a._v("#")]),a._v(" 调度策略")]),a._v(" "),t("p",[a._v("调度器的整体工作原理")]),a._v(" "),t("p",[a._v("常见的预选策略和优选策略")]),a._v(" "),t("h4",{attrs:{id:"部署策略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署策略"}},[a._v("#")]),a._v(" 部署策略")]),a._v(" "),t("p",[a._v("如何利用 k8s 本身的机制完成包括重建、滚动部署，重建部署，蓝绿部署，金丝雀部署")]),a._v(" "),t("h4",{attrs:{id:"深入-pod"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#深入-pod"}},[a._v("#")]),a._v(" 深入 pod")]),a._v(" "),t("p",[a._v("了解 pod 的设计思想，生命周期")]),a._v(" "),t("h2",{attrs:{id:"落地与实践"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#落地与实践"}},[a._v("#")]),a._v(" 落地与实践")]),a._v(" "),t("h2",{attrs:{id:"高可用集群搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#高可用集群搭建"}},[a._v("#")]),a._v(" 高可用集群搭建")]),a._v(" "),t("h2",{attrs:{id:"业务系统迁移-k8s"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#业务系统迁移-k8s"}},[a._v("#")]),a._v(" 业务系统迁移 k8s")]),a._v(" "),t("h4",{attrs:{id:"harbor-搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#harbor-搭建"}},[a._v("#")]),a._v(" Harbor 搭建")]),a._v(" "),t("h4",{attrs:{id:"服务发现-策略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务发现-策略"}},[a._v("#")]),a._v(" 服务发现 策略")]),a._v(" "),t("h4",{attrs:{id:"ingressnginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ingressnginx"}},[a._v("#")]),a._v(" IngressNginx")]),a._v(" "),t("h4",{attrs:{id:"ci-cd-实践"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ci-cd-实践"}},[a._v("#")]),a._v(" CI/CD 实践")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/image-20220513144549051.png",alt:"image-20220513144549051"}})]),a._v(" "),t("h1",{attrs:{id:"了解-k8s"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#了解-k8s"}},[a._v("#")]),a._v(" 了解 k8s")]),a._v(" "),t("p",[a._v("环境参数")]),a._v(" "),t("ul",[t("li",[a._v("K8s 1.14.0")]),a._v(" "),t("li",[a._v("Docker 17.03.x")]),a._v(" "),t("li",[a._v("java 1.8")]),a._v(" "),t("li",[a._v("Harbor 1.6.0")]),a._v(" "),t("li",[a._v("Prometheus 2.8.1")]),a._v(" "),t("li",[a._v("istio 1.1.2")])]),a._v(" "),t("h2",{attrs:{id:"核心概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#核心概念"}},[a._v("#")]),a._v(" 核心概念")]),a._v(" "),t("h2",{attrs:{id:"滚动部署的实现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#滚动部署的实现"}},[a._v("#")]),a._v(" 滚动部署的实现")]),a._v(" "),t("ul",[t("li",[a._v("Pod")]),a._v(" "),t("li",[a._v("ReplicaSet")]),a._v(" "),t("li",[a._v("Deployment")])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/image-20220513152333611.png",alt:"image-20220513152333611"}})]),a._v(" "),t("p",[a._v("Deployment 通过 RS 副本 创建指定数量的 POD 实现。")]),a._v(" "),t("h2",{attrs:{id:"service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#service"}},[a._v("#")]),a._v(" Service")]),a._v(" "),t("ul",[t("li",[a._v("Service")]),a._v(" "),t("li",[a._v("label")])]),a._v(" "),t("h1",{attrs:{id:"k8s-的架构设计"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#k8s-的架构设计"}},[a._v("#")]),a._v(" k8s 的架构设计")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/image-20220513163816554.png",alt:"image-20220513163816554"}})]),a._v(" "),t("ul",[t("li",[t("p",[a._v("ETCD => 存储")])]),a._v(" "),t("li",[t("p",[a._v("Master")]),a._v(" "),t("ul",[t("li",[a._v("ApiServer")]),a._v(" "),t("li",[a._v("Scheduler")]),a._v(" "),t("li",[a._v("ControllerManager")])])]),a._v(" "),t("li",[t("p",[a._v("Worker")]),a._v(" "),t("ul",[t("li",[a._v("kubelet")]),a._v(" "),t("li",[a._v("Docker")])])])]),a._v(" "),t("p",[a._v("![截屏2022-01-06 下午7.50.39](https://muyids.oss-cn-beijing.aliyuncs.com/截屏2022-01-06 下午 7.50.39.png)")]),a._v(" "),t("h2",{attrs:{id:"核心组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#核心组件"}},[a._v("#")]),a._v(" 核心组件")]),a._v(" "),t("h3",{attrs:{id:"api-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#api-server"}},[a._v("#")]),a._v(" API Server")]),a._v(" "),t("p",[a._v("Kubernetes API Server 的核心功能是提供 Kubernetes 各类资源对象（如 Pod、RC、Service 等）的增、删、改、查及 Watch 等 HTTP Rest 接口，成为集群内各个功能模块之间数据交互和通信的中心枢纽，是整个系统的数据总线和数据中心。除此之外，它还有以下一些功能特性。")]),a._v(" "),t("ul",[t("li",[a._v("集群管理 API 的入口")]),a._v(" "),t("li",[a._v("资源配额控制的入口")]),a._v(" "),t("li",[a._v("提供了完备的集群安全机制")])]),a._v(" "),t("h3",{attrs:{id:"controller-manager"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#controller-manager"}},[a._v("#")]),a._v(" Controller Manager")]),a._v(" "),t("p",[a._v("controller 相当于 k8s 的控制系统")]),a._v(" "),t("h3",{attrs:{id:"scheduler"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#scheduler"}},[a._v("#")]),a._v(" Scheduler")]),a._v(" "),t("h3",{attrs:{id:"kubelet"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubelet"}},[a._v("#")]),a._v(" kubelet")]),a._v(" "),t("p",[a._v("每个 Node 上都会启动一个 kubelet 服务进程。该进程用于处理 Master 下发到本节点的任务，管理 Pod 及 Pod 中的容器。每个 kubelet 进程都会在 API Server 上注册节点自身的信息，定期向 Master 汇报节点资源的使用情况，并通过 cAdvisor 监控容器和节点资源。")]),a._v(" "),t("h3",{attrs:{id:"kube-proxy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kube-proxy"}},[a._v("#")]),a._v(" kube-proxy")]),a._v(" "),t("h1",{attrs:{id:"认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#认证"}},[a._v("#")]),a._v(" 认证")]),a._v(" "),t("p",[a._v("三种认证方式")]),a._v(" "),t("h2",{attrs:{id:"客户端证书认证-tls-双向认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#客户端证书认证-tls-双向认证"}},[a._v("#")]),a._v(" 客户端证书认证（TLS 双向认证）")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/image-20220513165012326.png",alt:"image-20220513165012326"}})]),a._v(" "),t("h2",{attrs:{id:"bearer-token"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bearer-token"}},[a._v("#")]),a._v(" Bearer Token")]),a._v(" "),t("h2",{attrs:{id:"serviceaccount"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#serviceaccount"}},[a._v("#")]),a._v(" ServiceAccount")]),a._v(" "),t("p",[a._v("三部分，通过目录挂载的方式")]),a._v(" "),t("ul",[t("li",[a._v("namespace")]),a._v(" "),t("li",[a._v("token")]),a._v(" "),t("li",[a._v("ca")])]),a._v(" "),t("p",[a._v("k8s 内部 运行 Pod")]),a._v(" "),t("h1",{attrs:{id:"鉴权"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#鉴权"}},[a._v("#")]),a._v(" 鉴权")]),a._v(" "),t("p",[a._v("授权策略")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("ABAC")])]),a._v(" "),t("li",[t("p",[a._v("WebHook")])]),a._v(" "),t("li",[t("p",[a._v("RBAC：更好的选择，只需要学习 RBAC 即可")])])]),a._v(" "),t("h2",{attrs:{id:"rbac-基于角色的访问控制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rbac-基于角色的访问控制"}},[a._v("#")]),a._v(" RBAC：基于角色的访问控制")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/image-20220513165809299.png",alt:"image-20220513165809299"}})]),a._v(" "),t("p",[a._v("RoleBinding 解决用户和角色绑定的问题，")]),a._v(" "),t("p",[a._v("Test 指的是 namespace，")]),a._v(" "),t("p",[a._v("跨 namespace 的情况通过 ClusterRole 来解决")]),a._v(" "),t("h2",{attrs:{id:"adminsioncontrol"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#adminsioncontrol"}},[a._v("#")]),a._v(" AdminsionControl")]),a._v(" "),t("p",[a._v("准入控制")]),a._v(" "),t("p",[a._v("k8s 提供了 20 多种 准入控制，包括 AlwaysAdmit，AlwaysDeny，ServiceAccount 等")]),a._v(" "),t("h1",{attrs:{id:"集群搭建方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集群搭建方案"}},[a._v("#")]),a._v(" 集群搭建方案")]),a._v(" "),t("h2",{attrs:{id:"社区方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#社区方案"}},[a._v("#")]),a._v(" 社区方案")]),a._v(" "),t("p",[a._v("缺点：")]),a._v(" "),t("ul",[t("li",[a._v("杂乱")]),a._v(" "),t("li",[a._v("不可靠")]),a._v(" "),t("li",[a._v("升级困难")])]),a._v(" "),t("h2",{attrs:{id:"kubeadm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubeadm"}},[a._v("#")]),a._v(" Kubeadm")]),a._v(" "),t("p",[a._v("优点：")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("优雅")])]),a._v(" "),t("li",[t("p",[a._v("简单")])]),a._v(" "),t("li",[t("p",[a._v("支持高可用")])]),a._v(" "),t("li",[t("p",[a._v("升级方便\n缺点：")])]),a._v(" "),t("li",[t("p",[a._v("不易维护")])]),a._v(" "),t("li",[t("p",[a._v("文档不细致")])])]),a._v(" "),t("h2",{attrs:{id:"binary"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#binary"}},[a._v("#")]),a._v(" Binary")]),a._v(" "),t("p",[a._v("优点：")]),a._v(" "),t("ul",[t("li",[a._v("易于维护")]),a._v(" "),t("li",[a._v("灵活")]),a._v(" "),t("li",[a._v("升级方便")])]),a._v(" "),t("p",[a._v("缺点：")]),a._v(" "),t("ul",[t("li",[a._v("没有官方文档")]),a._v(" "),t("li",[a._v("安装 复杂")])])])}),[],!1,null,null,null);t.default=v.exports}}]);