(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{393:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"git-提交规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#git-提交规范"}},[s._v("#")]),s._v(" Git 提交规范")]),s._v(" "),t("h1",{attrs:{id:"git-提交规范-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#git-提交规范-2"}},[s._v("#")]),s._v(" Git 提交规范")]),s._v(" "),t("h2",{attrs:{id:"一、分支命名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、分支命名"}},[s._v("#")]),s._v(" 一、分支命名")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("分支")]),s._v(" "),t("th",[s._v("命名规范")]),s._v(" "),t("th",[s._v("命名示列")]),s._v(" "),t("th",[s._v("是否保护")]),s._v(" "),t("th",[s._v("备注")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("main")]),s._v(" "),t("td",[s._v("main，不可修改")]),s._v(" "),t("td",[s._v("main")]),s._v(" "),t("td",[s._v("True")]),s._v(" "),t("td",[s._v("缺省分支，记录生产环境的发布历史")])]),s._v(" "),t("tr",[t("td",[s._v("hotfix")]),s._v(" "),t("td",[s._v("hotfix-yyyyMMdd-*")]),s._v(" "),t("td",[s._v("hotfix-20220120-J2795")]),s._v(" "),t("td",[s._v("False")]),s._v(" "),t("td",[s._v("缺陷修复分支，用来紧急修复某个生产环境的缺陷")])]),s._v(" "),t("tr",[t("td",[s._v("release")]),s._v(" "),t("td",[s._v("release，不可修改")]),s._v(" "),t("td",[s._v("release")]),s._v(" "),t("td",[s._v("True")]),s._v(" "),t("td",[s._v("版本发布分支，用来准备某个版本的发布")])]),s._v(" "),t("tr",[t("td",[s._v("develop")]),s._v(" "),t("td",[s._v("dev，不可修改")]),s._v(" "),t("td",[s._v("develop")]),s._v(" "),t("td",[s._v("True")]),s._v(" "),t("td",[s._v("开发集成分支，用来集成功能开发的代码")])]),s._v(" "),t("tr",[t("td",[s._v("feature")]),s._v(" "),t("td",[s._v("feature-function*")]),s._v(" "),t("td",[s._v("feature-mobile_bi")]),s._v(" "),t("td",[s._v("False")]),s._v(" "),t("td",[s._v("功能开发分支，用来开发某个功能或特性")])])])]),s._v(" "),t("ul",[t("li",[s._v("main : 项目主分支")]),s._v(" "),t("li",[s._v("hotfix 的命名规范 hotfix-yyyyMMdd-*，hotfix 分支一般是用来修复生产环境的缺陷。J2795 代表修复 Jira 上编号是 2795 的工单，也可以是 S5223 代表修复 Support 系统上标号是 5223 的工单；如果缺陷不来源 Jira 或者 Support 系统，可以自行录入到 Jira。")]),s._v(" "),t("li",[s._v("feature 的命名规范是 feature-function*，feature 分支主要是用来功能或者特性开发，function 是功能或特性的摘要描述，比如 feature-mobile_bi 是表示 BI 的移动端功能开发分支。")])]),s._v(" "),t("h2",{attrs:{id:"二、git-flow"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、git-flow"}},[s._v("#")]),s._v(" 二、Git Flow")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/img/20220812182523278.png",alt:"img"}})]),s._v(" "),t("h1",{attrs:{id:"代码规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码规范"}},[s._v("#")]),s._v(" 代码规范")]),s._v(" "),t("h2",{attrs:{id:"代码风格统一"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码风格统一"}},[s._v("#")]),s._v(" 代码风格统一")]),s._v(" "),t("h3",{attrs:{id:"javascritpt-编码规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#javascritpt-编码规范"}},[s._v("#")]),s._v(" Javascritpt 编码规范")]),s._v(" "),t("p",[s._v("https://google.github.io/styleguide/jsguide.html")]),s._v(" "),t("h3",{attrs:{id:"java-编码规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#java-编码规范"}},[s._v("#")]),s._v(" Java 编码规范")]),s._v(" "),t("p",[s._v("https://alibaba.github.io/Alibaba-Java-Coding-Guidelines/")]),s._v(" "),t("p",[s._v("https://plugins.jetbrains.com/plugin/10046-alibaba-java-coding-guidelines")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://google.github.io/styleguide/javaguide.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Google Java Style Guide"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"python-编码规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#python-编码规范"}},[s._v("#")]),s._v(" Python 编码规范")]),s._v(" "),t("p",[s._v("https://peps.python.org/pep-0008/#introduction")]),s._v(" "),t("h2",{attrs:{id:"code-review-金字塔"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#code-review-金字塔"}},[s._v("#")]),s._v(" Code Review 金字塔")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/img/20220812182550231.png",alt:"img"}})]),s._v(" "),t("h2",{attrs:{id:"外部工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#外部工具"}},[s._v("#")]),s._v(" 外部工具")]),s._v(" "),t("h3",{attrs:{id:"phabricator"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#phabricator"}},[s._v("#")]),s._v(" Phabricator")]),s._v(" "),t("p",[s._v("https://phacility.com/phabricator/")]),s._v(" "),t("h3",{attrs:{id:"gerrit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gerrit"}},[s._v("#")]),s._v(" Gerrit")]),s._v(" "),t("p",[s._v("https://gerrit-review.googlesource.com/q/status:open+-is:wip")]),s._v(" "),t("p",[s._v("https://gerrit.googlesource.com/plugins/replication/+doc/master/src/main/resources/Documentation/config.md")]),s._v(" "),t("p",[s._v("https://gerrit-review.googlesource.com/Documentation/linux-quickstart.html")]),s._v(" "),t("h1",{attrs:{id:"pre-commit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pre-commit"}},[s._v("#")]),s._v(" Pre-Commit")]),s._v(" "),t("p",[s._v("https://pre-commit.com/")]),s._v(" "),t("h2",{attrs:{id:"quick-start"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#quick-start"}},[s._v("#")]),s._v(" Quick Start")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("安装\nbrew "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pre-commit\n\n创建文件\n.pre-commit-config.yaml\n生成默认配置\npre-commit sample-config\n安装 hooks\npre-commit "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("手动pre-commit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\npre-commit run --all-files\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h2",{attrs:{id:"available-hooks-推荐配置-python-为例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#available-hooks-推荐配置-python-为例"}},[s._v("#")]),s._v(" Available Hooks 推荐配置（Python 为例）")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# See https://pre-commit.com for more information")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# See https://pre-commit.com/hooks.html for more hooks")]),s._v("\ndefault_stages: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("commit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nrepos:\n  - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: v4.3.0\n    hooks:\n      - id: requirements-txt-fixer\n      - id: trailing-whitespace\n      - id: end-of-file-fixer\n      - id: check-added-large-files\n      - id: check-ast\n      - id: check-case-conflict\n      - id: check-docstring-first\n      - id: check-json\n      - id: check-yaml\n      - id: fix-encoding-pragma\n      - id: check-merge-conflict\n      - id: name-tests-test\n      - id: double-quote-string-fixer\n  - repo: https://github.com/pre-commit/mirrors-prettier\n    rev: v2.7.1\n    hooks:\n      - id: prettier\n  - repo: https://github.com/PyCQA/flake8\n    rev: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.0")]),s._v(".2\n    hooks:\n      - id: flake8\n  - repo: https://github.com/jumanjihouse/pre-commit-hooks\n    rev: master\n    hooks:\n      - id: protect-first-parent\n  - repo: "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\n    hooks:\n      - id: commitizen\n        name: My commitizen check\n        entry: cz\n        args: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"check"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--commit-msg-file"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('".git/COMMIT_EDITMSG"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        pass_filenames: "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n        language: system\n        stages: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("commit-msg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br")])]),t("h2",{attrs:{id:"prettier"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#prettier"}},[s._v("#")]),s._v(" prettier")]),s._v(" "),t("p",[s._v("https://prettier.io/")]),s._v(" "),t("p",[s._v("前端 格式自动化")]),s._v(" "),t("p",[s._v("Python 同类工具：black")]),s._v(" "),t("p",[s._v("Local Cli")]),s._v(" "),t("div",{staticClass:"language-Nginx line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-nginx"}},[t("code",[s._v("prettier --write .\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("Ignore")]),s._v(" "),t("div",{staticClass:"language-CSS line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-css"}},[t("code",[s._v("# .prettierignore\n# Ignore "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("artifacts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\nbuild\ncoverage\n\n# Ignore all HTML "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("files")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n*.html\n**/__pycache__\n\n*.json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h2",{attrs:{id:"foxtrots-merge"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#foxtrots-merge"}},[s._v("#")]),s._v(" Foxtrots Merge")]),s._v(" "),t("p",[s._v("https://blog.developer.atlassian.com/stop-foxtrots-now/")]),s._v(" "),t("h3",{attrs:{id:"避免策略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#避免策略"}},[s._v("#")]),s._v(" 避免策略")]),s._v(" "),t("h4",{attrs:{id:"_1、-git-pull-rebase"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、-git-pull-rebase"}},[s._v("#")]),s._v(" 1、 "),t("code",[s._v("git pull -rebase")])]),s._v(" "),t("p",[s._v("如果 你有两个分支在开发中，你会选择下面哪种方案进行合并？")]),s._v(" "),t("div",{staticClass:"language-PowerShell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("       D-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("E test\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n\n A-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("B-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("C-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("F-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" master\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("strong",[s._v("git pull")]),s._v(" = git fetch + git merge FETCH_HEAD")]),s._v(" "),t("div",{staticClass:"language-PowerShell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("       D-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("E\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("          \\\n\n A-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("B-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("C-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("F-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("G-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("   test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" master\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("strong",[s._v("git pull --rebase")]),s._v(" = git fetch + git rebase FETCH_HEAD")]),s._v(" "),t("div",{staticClass:"language-Bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("A---B---D---E---C‘---F‘---   test, master\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"_2、avoid-git-merge-master"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、avoid-git-merge-master"}},[s._v("#")]),s._v(" 2、avoid "),t("code",[s._v("git merge master")])]),s._v(" "),t("h4",{attrs:{id:"_3、protect-first-parent"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、protect-first-parent"}},[s._v("#")]),s._v(" 3、protect-first-parent")]),s._v(" "),t("p",[s._v("https://github.com/jumanjihouse/pre-commit-hooks#protect-first-parent")]),s._v(" "),t("div",{staticClass:"language-SQL line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" repo: https:"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//github.com/jumanjihouse/pre-commit-hooks")]),s._v("\n  rev: master\n\n  hooks:\n\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" id: protect"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("first")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("parent "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# prevent foxtrot merges")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"commitizen"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#commitizen"}},[s._v("#")]),s._v(" commitizen")]),s._v(" "),t("p",[s._v("https://github.com/commitizen")]),s._v(" "),t("p",[s._v("Local cli")]),s._v(" "),t("div",{staticClass:"language-SQL line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("brew install commitizen\ncz c "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# shortcut for "cz commi"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"其他同类工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他同类工具"}},[s._v("#")]),s._v(" 其他同类工具")]),s._v(" "),t("p",[s._v("Husky 是 npm 生态常见的 hooks 工具")]),s._v(" "),t("p",[s._v("https://github.com/typicode/husky")]),s._v(" "),t("h1",{attrs:{id:"server-hooks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#server-hooks"}},[s._v("#")]),s._v(" Server Hooks")]),s._v(" "),t("p",[s._v("https://docs.gitlab.com/ee/administration/server_hooks.html")]),s._v(" "),t("p",[s._v("Within a server hooks directory, hooks:")]),s._v(" "),t("ul",[t("li",[s._v("Are executed in alphabetical order.")]),s._v(" "),t("li",[s._v("Stop executing when a hook exits with a non-zero value.")])]),s._v(" "),t("h2",{attrs:{id:"配置-gitlab-服务端-hooks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-gitlab-服务端-hooks"}},[s._v("#")]),s._v(" 配置 gitlab 服务端 hooks")]),s._v(" "),t("h3",{attrs:{id:"_1、修改-配置文件-etc-gitlab-gitlab-rb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、修改-配置文件-etc-gitlab-gitlab-rb"}},[s._v("#")]),s._v(" 1、修改 配置文件 /etc/gitlab/gitlab.rb")]),s._v(" "),t("div",{staticClass:"language-PowerShell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("gitaly"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'custom_hooks_dir'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" = "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/etc/gitlab/custom_hooks"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_2、增加-custom-hooks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、增加-custom-hooks"}},[s._v("#")]),s._v(" 2、增加 custom_hooks")]),s._v(" "),t("div",{staticClass:"language-Shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("/etc/gitlab/custom_hooks"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tree -L 2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n├── post-receive.d\n├── pre-receive.d\n│   └── check_merge_request.py\n└── update.d\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("编写 自己的 hooks")]),s._v(" "),t("div",{staticClass:"language-Python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/usr/bin/env python")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" sys\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" fileinput\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" commands\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" re\nedge "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hot'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dev'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'main'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'release'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dev'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'main'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'feat'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dev'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("is_edge_existed")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source_branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" target_branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" source "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" edge"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("len")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source_branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("len")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" source_branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("len")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" target "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" edge"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("len")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("target_branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("len")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("target"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" target_branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("len")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("target"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" target"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("show_legal_merge")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Only support merge as below:\\n'")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" source "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" edge"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" target "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" edge"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{0} -> {1},\\n'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("format")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" target"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" line "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" fileinput"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("input")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pre-receive: Trying to push ref: %s\\n"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v(" line\n    values "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" line"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("split"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    old "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" values"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    new "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" values"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    ref "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" values"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("output "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" commands"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getstatusoutput"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'git rev-list --pretty \"{0}..{1}\" -n 1 --format=%B'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("format")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("old"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" new"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Merge branch "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("not")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" output"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# not check ~merge commit")]),s._v("\n        sys"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    source_branch "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" re"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("search"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Merge branch \\'(.+?)\\' into'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" output"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" source_branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        source_branch "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" source_branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("group"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    target_branch "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" re"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("search"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'into \\'(.+?)\\''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" output"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" target_branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        target_branch "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" target_branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("group"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    legal "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" is_edge_existed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source_branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" target_branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" legal "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("is")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        show_legal_merge"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        sys"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    sys"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br")])]),t("h1",{attrs:{id:"gitlab-操作指南"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-操作指南"}},[s._v("#")]),s._v(" GitLab 操作指南")]),s._v(" "),t("h2",{attrs:{id:"约定"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#约定"}},[s._v("#")]),s._v(" 约定")]),s._v(" "),t("ul",[t("li",[s._v("遵循 git flow")]),s._v(" "),t("li",[s._v("分支命名：main，dev，feat-xxx，release-xxx，")]),s._v(" "),t("li",[s._v("main 、dev 为主分支，分别对应 生产环境 和 测试环境；")]),s._v(" "),t("li",[s._v("开发人员创建使用 feat、hotfix 分支开发和修复 bug，通过 发起 merge request 的方式合入 目标分支")]),s._v(" "),t("li",[s._v("maintainer 角色拥有 main、dev 分支的 merge 权限")])]),s._v(" "),t("h2",{attrs:{id:"_1、项目创建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、项目创建"}},[s._v("#")]),s._v(" 1、项目创建")]),s._v(" "),t("ol",[t("li",[s._v("Owner 创建项目，并初始化 main 、dev 分支，设置 B ranch Protected 规则：")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/img/20220812182617799.png",alt:"img"}})]),s._v(" "),t("p",[s._v("原则是 禁止 maintainers 以外人员 对 main、dev 分支 进行 merge 或 push 操作")]),s._v(" "),t("h2",{attrs:{id:"_2、开发新功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、开发新功能"}},[s._v("#")]),s._v(" 2、开发新功能")]),s._v(" "),t("h3",{attrs:{id:"_2-1、本地开发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1、本地开发"}},[s._v("#")]),s._v(" 2-1、本地开发")]),s._v(" "),t("p",[s._v("开发人员 从 dev 分支 checkout 出 功能分支，进行命名，命名规范为 "),t("strong",[s._v("feat-${功能名}")])]),s._v(" "),t("p",[s._v("在 feat 分支上开发新功能并推送至 upstream")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/img/:Users:aibee:Documents:picgo:20220812182646986.png",alt:"img"}})]),s._v(" "),t("h2",{attrs:{id:"_2-2、merge-request"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2、merge-request"}},[s._v("#")]),s._v(" 2-2、Merge Request")]),s._v(" "),t("p",[s._v("开发完成后 登录 gitlab dashboard 发起 merge request")]),s._v(" "),t("p",[t("strong",[s._v("注意：feat 分支 只能 merge to dev 分支 (我们在 Server Hooks 部分已增加 custom_hooks 限制，将拒绝非法 merge 请求)")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/img/20220812182757481.png",alt:"img"}})]),s._v(" "),t("h3",{attrs:{id:"_2-3、code-review-决议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3、code-review-决议"}},[s._v("#")]),s._v(" 2-3、Code Review & 决议")]),s._v(" "),t("p",[s._v("所有成员都可以对 当前 request 中的所有 commits 内容进行 Review，提出建设性建议，Review 原则可以参考 "),t("strong",[s._v("Code Review")]),s._v(" "),t("strong",[s._v("金字塔")]),s._v("；")]),s._v(" "),t("p",[s._v("最终 Maintainer 决议 该 merge 是否通过。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/img/20220812182815635.png",alt:"img"}})]),s._v(" "),t("h2",{attrs:{id:"_3、上线测试环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、上线测试环境"}},[s._v("#")]),s._v(" 3、上线测试环境")]),s._v(" "),t("p",[s._v("feature 开发完成后，在 feature 分支上打 tag 发布 QA 环境，tag 的命名规则 release-test-*自动触发 gitlab ci。")]),s._v(" "),t("p",[s._v("QA 环境测试验收后，feature 分支代码合并到 develop 分支，删除 feature 分支。")]),s._v(" "),t("h2",{attrs:{id:"_4、上线正式环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、上线正式环境"}},[s._v("#")]),s._v(" 4、上线正式环境")])])}),[],!1,null,null,null);t.default=e.exports}}]);