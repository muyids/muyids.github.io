(window.webpackJsonp=window.webpackJsonp||[]).push([[399],{673:function(a,e,s){"use strict";s.r(e);var r=s(14),t=Object(r.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"mac-本机-brew-环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mac-本机-brew-环境"}},[a._v("#")]),a._v(" mac 本机 brew 环境")]),a._v(" "),e("h1",{attrs:{id:"二进制安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二进制安装"}},[a._v("#")]),a._v(" 二进制安装")]),a._v(" "),e("h2",{attrs:{id:"zookeeper-和-jdk-本地依赖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper-和-jdk-本地依赖"}},[a._v("#")]),a._v(" zookeeper 和 JDK 本地依赖")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("安装目录：/usr/local/zookeeper")])]),a._v(" "),e("li",[e("p",[a._v("环境变量：")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('export ZOOKEEPER_HOME=/usr/local/zookeeper\nexport PATH=$PATH:$ZOOKEEPER_HOME/bin\nexport PATH="/usr/local/opt/openjdk/bin:$PATH"\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])])]),a._v(" "),e("li",[e("p",[a._v("服务启动")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("配置文件")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v(" /usr/local/zookeeper/conf/zoo.cfg\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])])]),a._v(" "),e("li",[e("p",[a._v("➜ bin zkServer.sh start 配置文件")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("ZooKeeper JMX enabled by default\nUsing config: /usr/local/zookeeper/bin/../conf/zoo.cfg\nStarting zookeeper ... STARTED\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])])]),a._v(" "),e("li",[e("p",[a._v("查看服务是否启动 ➜ bin Jps")]),a._v(" "),e("p",[a._v("6659\n10948 QuorumPeerMain")])])])]),a._v(" "),e("li",[e("p",[a._v("客户端：")]),a._v(" "),e("ul",[e("li",[a._v("➜ zkCli.sh")])])])]),a._v(" "),e("hr"),a._v(" "),e("h1",{attrs:{id:"集群环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#集群环境"}},[a._v("#")]),a._v(" "),e("strong",[a._v("集群环境")])]),a._v(" "),e("p",[a._v("以测试机部署 zookeeper 集群为例，详解部署过程")]),a._v(" "),e("ul",[e("li",[a._v("129.0.4.32")]),a._v(" "),e("li",[a._v("129.0.4.33")]),a._v(" "),e("li",[a._v("129.0.4.34")])]),a._v(" "),e("h4",{attrs:{id:"下载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[a._v("#")]),a._v(" 下载")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("https://zookeeper.apache.org/\ncd /app/\nwget https://mirrors.bfsu.edu.cn/apache/zookeeper/zookeeper-3.6.1/apache-zookeeper-3.6.1-bin.tar.gz\ntar -zxvf apache-zookeeper-3.6.1-bin.tar.gz -C /app/\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("h4",{attrs:{id:"配置数据存储目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置数据存储目录"}},[a._v("#")]),a._v(" 配置数据存储目录")]),a._v(" "),e("p",[a._v("mkdir -p /data/zkData")]),a._v(" "),e("h4",{attrs:{id:"配置服务器-id"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置服务器-id"}},[a._v("#")]),a._v(" 配置服务器 id")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("cd /data/zkData\ntouch myid\necho xxxx(服务器编号) >> myid\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("h4",{attrs:{id:"修改配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[a._v("#")]),a._v(" 修改配置文件")]),a._v(" "),e("p",[a._v("conf 这个路径下的 zoo_sample.cfg 修改为 zoo.cfg；")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("cd /app/apache-zookeeper-3.6.1-bin/conf\ncp zoo_sample.cfg zoo.cfg\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("p",[a._v("修改数据存储路径"),e("code",[a._v("vi zoo.cfg")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("dataDir=/data/zkData\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("修改 cluster 配置")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("#######################cluster##########################\nserver.2=129.0.4.32:2888:3888\nserver.3=129.0.4.33:2888:3888\nserver.4=129.0.4.34:2888:3888\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("h4",{attrs:{id:"启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[a._v("#")]),a._v(" 启动")]),a._v(" "),e("p",[e("code",[a._v("/app/apache-zookeeper-3.6.1-bin/bin/zkServer.sh start")])]),a._v(" "),e("h4",{attrs:{id:"查看进程是否启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看进程是否启动"}},[a._v("#")]),a._v(" 查看进程是否启动")]),a._v(" "),e("p",[a._v("jps")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("10743 Jps\n10666 QuorumPeerMain\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h4",{attrs:{id:"查看状态"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看状态"}},[a._v("#")]),a._v(" 查看状态")]),a._v(" "),e("p",[e("code",[a._v("/app/apache-zookeeper-3.6.1-bin/bin/zkServer.sh status")])]),a._v(" "),e("p",[a._v("输出")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("ZooKeeper JMX enabled by default\nUsing config: /app/apache-zookeeper-3.6.1-bin/bin/../conf/zoo.cfg\nClient port found: 2181. Client address: localhost.\nMode: follower\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("p",[a._v("几种 Mode:")]),a._v(" "),e("ul",[e("li",[a._v("standalone : 单机")]),a._v(" "),e("li",[a._v("follower : cluster 中的跟随者")]),a._v(" "),e("li",[a._v("leader : cluster 中的 leader")])]),a._v(" "),e("h4",{attrs:{id:"客户端操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#客户端操作"}},[a._v("#")]),a._v(" 客户端操作")])])}),[],!1,null,null,null);e.default=t.exports}}]);