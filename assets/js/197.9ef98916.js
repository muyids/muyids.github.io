(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{470:function(v,_,o){"use strict";o.r(_);var t=o(14),r=Object(t.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h4",{attrs:{id:"大纲"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#大纲"}},[v._v("#")]),v._v(" 大纲")]),v._v(" "),_("ul",[_("li",[v._v("生产者分区策略")]),v._v(" "),_("li",[v._v("生产者数据可靠性保证")])]),v._v(" "),_("h4",{attrs:{id:"生产者分区策略"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#生产者分区策略"}},[v._v("#")]),v._v(" 生产者分区策略")]),v._v(" "),_("p",[_("strong",[v._v("1、分区原因")])]),v._v(" "),_("ul",[_("li",[v._v("方便在集群中扩展，每个 Partition 可以通过调整以适应它所在的机器，而一个 topic\n又可以有多个 Partition 组成，因此整个集群就可以适应任意大小的数据了")]),v._v(" "),_("li",[v._v("提高并发，可以以 Partition 为单位读写")])]),v._v(" "),_("p",[_("strong",[v._v("2、分区原则")])]),v._v(" "),_("p",[v._v("将 producer 发送的数据封装成一个"),_("code",[v._v("ProducerRecord")]),v._v("对象。")]),v._v(" "),_("p",[v._v("ProducerRecord 对象的构造方法：")]),v._v(" "),_("p",[_("img",{attrs:{src:"https://muyids.oss-cn-beijing.aliyuncs.com/kafka-java-ProducerRecord.png",alt:"ProducerRecord"}})]),v._v(" "),_("ol",[_("li",[v._v("指明"),_("code",[v._v("partition")]),v._v("，直接使用")]),v._v(" "),_("li",[v._v("没有"),_("code",[v._v("partition")]),v._v("，指定了"),_("code",[v._v("key")]),v._v("的情况，将"),_("code",[v._v("key")]),v._v("的 hash 值与"),_("code",[v._v("topic")]),v._v("的"),_("code",[v._v("partition")]),v._v("数进行取余得到"),_("code",[v._v("partition")]),v._v("的值")]),v._v(" "),_("li",[v._v("既没有"),_("code",[v._v("partition")]),v._v("又没有"),_("code",[v._v("key")]),v._v("的情况，第一次随机生成一个整数，后面自增，然后与"),_("code",[v._v("topic")]),v._v("可用的"),_("code",[v._v("partition")]),v._v("总数取余得到"),_("code",[v._v("partition")]),v._v("的值，也就是 "),_("code",[v._v("round-robin")]),v._v(" 算法")])]),v._v(" "),_("hr"),v._v(" "),_("p",[_("strong",[v._v("生产者数据可靠性保证")])]),v._v(" "),_("ol",[_("li",[v._v("副本数据同步策略")]),v._v(" "),_("li",[v._v("ISR ：什么是 ISR？为什么要有 ISR 机制")]),v._v(" "),_("li",[v._v("ACK 应答机制；三种可靠性级别是怎样的、会在什么场景下丢数据或产生重复数据；")]),v._v(" "),_("li",[v._v("故障处理细节：LEO、HW 概念、"),_("code",[v._v("leader")]),v._v("和"),_("code",[v._v("follower")]),v._v("故障时，都是怎么处理的；")])])])}),[],!1,null,null,null);_.default=r.exports}}]);