(window.webpackJsonp=window.webpackJsonp||[]).push([[219],{492:function(t,s,a){"use strict";a.r(s);var n=a(14),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"openfeign"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#openfeign"}},[t._v("#")]),t._v(" OpenFeign")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://fltrp-dera.oss-cn-hangzhou.aliyuncs.com/spring-cloud/pic/Feign%E7%9A%841.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("是一个声明式的 web 客户端,只需要创建一个接口,添加注解即可完成微服务之间的调用")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://fltrp-dera.oss-cn-hangzhou.aliyuncs.com/spring-cloud/pic/Feign%E7%9A%842.png",alt:""}})]),t._v(" "),s("p",[t._v("==就是 A 要调用 B,Feign 就是在 A 中创建一个一模一样的 B 对外提供服务的的接口,我们调用这个接口,就可以服务到 B==")]),t._v(" "),s("h3",{attrs:{id:"feign-与-openfeign-区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#feign-与-openfeign-区别"}},[t._v("#")]),t._v(" "),s("strong",[t._v("Feign 与 OpenFeign 区别")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://fltrp-dera.oss-cn-hangzhou.aliyuncs.com/spring-cloud/pic/Feign%E7%9A%843.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"使用-openfeign"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-openfeign"}},[t._v("#")]),t._v(" 使用 OpenFeign")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("之前的服务间调用"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("我们使用的是ribbon"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestTemplate")]),t._v("\n\t\t现在改为使用"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Feign")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h4",{attrs:{id:"_1-新建一个-order-项目-用于-feign-测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-新建一个-order-项目-用于-feign-测试"}},[t._v("#")]),t._v(" 1,新建一个 order 项目,用于 feign 测试")]),t._v(" "),s("p",[t._v("名字 cloud_order_feign-80")]),t._v(" "),s("h4",{attrs:{id:"_2-pom-文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-pom-文件"}},[t._v("#")]),t._v(" 2,pom 文件")]),t._v(" "),s("h4",{attrs:{id:"_3-配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置文件"}},[t._v("#")]),t._v(" 3,配置文件")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://fltrp-dera.oss-cn-hangzhou.aliyuncs.com/spring-cloud/pic/Feign%E7%9A%844.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_4-主启动类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-主启动类"}},[t._v("#")]),t._v(" 4,主启动类")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://fltrp-dera.oss-cn-hangzhou.aliyuncs.com/spring-cloud/pic/Feign%E7%9A%845.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_5-fegin-需要调用的其他的服务的接口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-fegin-需要调用的其他的服务的接口"}},[t._v("#")]),t._v(" 5,fegin 需要调用的其他的服务的接口")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://fltrp-dera.oss-cn-hangzhou.aliyuncs.com/spring-cloud/pic/Feign%E7%9A%846.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_6-controller"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-controller"}},[t._v("#")]),t._v(" 6,controller")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://fltrp-dera.oss-cn-hangzhou.aliyuncs.com/spring-cloud/pic/Feign%E7%9A%847.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_7-测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-测试"}},[t._v("#")]),t._v(" 7 测试:")]),t._v(" "),s("p",[t._v("启动两个 erueka(7001,7002)")]),t._v(" "),s("p",[t._v("启动两个 pay(8001,8002)")]),t._v(" "),s("p",[t._v("启动当前的 order 模块")]),t._v(" "),s("p",[s("strong",[t._v("Feign 默认使用 ribbon 实现负载均衡")])]),t._v(" "),s("h3",{attrs:{id:"openfeign-超时机制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#openfeign-超时机制"}},[t._v("#")]),t._v(" OpenFeign 超时机制:")]),t._v(" "),s("p",[t._v("==OpenFeign 默认等待时间是 1 秒,超过 1 秒,直接报错==")]),t._v(" "),s("h4",{attrs:{id:"_1-设置超时时间-修改配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-设置超时时间-修改配置文件"}},[t._v("#")]),t._v(" 1,设置超时时间,修改配置文件:")]),t._v(" "),s("p",[s("strong",[t._v("因为 OpenFeign 的底层是 ribbon 进行负载均衡,所以它的超时时间是由 ribbon 控制")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://fltrp-dera.oss-cn-hangzhou.aliyuncs.com/spring-cloud/pic/Feign%E7%9A%848.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"openfeign-日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#openfeign-日志"}},[t._v("#")]),t._v(" OpenFeign 日志:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://fltrp-dera.oss-cn-hangzhou.aliyuncs.com/spring-cloud/pic/Feign%E7%9A%849.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("OpenFeign 的日志级别有:")]),t._v(" "),s("img",{attrs:{src:"https://fltrp-dera.oss-cn-hangzhou.aliyuncs.com/spring-cloud/pic/Feign%E7%9A%8410.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_1-使用-openfeign-的日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用-openfeign-的日志"}},[t._v("#")]),t._v(" 1,使用 OpenFeign 的日志:")]),t._v(" "),s("p",[s("strong",[t._v("实现在配置类中添加 OpenFeign 的日志类")])])])}),[],!1,null,null,null);s.default=r.exports}}]);