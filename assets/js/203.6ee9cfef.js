(window.webpackJsonp=window.webpackJsonp||[]).push([[203],{477:function(t,e,a){"use strict";a.r(e);var r=a(14),v=Object(r.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"内部-kafka-环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内部-kafka-环境"}},[t._v("#")]),t._v(" 内部 kafka 环境")]),t._v(" "),e("p",[t._v("开发环境、测试环境已分别部署三台 broker 组成的集群，供内部学习、开发、测试使用")]),t._v(" "),e("ul",[e("li",[t._v("zookeeper 集群搭建请参考："),e("RouterLink",{attrs:{to:"/zookeeper/2.集群部署.html"}},[t._v("zookeeper 集群搭建指南")])],1),t._v(" "),e("li",[t._v("kafka 集群搭建参考："),e("RouterLink",{attrs:{to:"/kafka/4.集群部署.html"}},[t._v("kafka 集群搭建指南")])],1)]),t._v(" "),e("h5",{attrs:{id:"开发环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开发环境"}},[t._v("#")]),t._v(" 开发环境")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("host")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("编号")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("zookeeper")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("kafka")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("129.0.4.32")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("2")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("129.0.4.33")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("3")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("129.0.4.34")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("4")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")])])])]),t._v(" "),e("h5",{attrs:{id:"测试环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试环境"}},[t._v("#")]),t._v(" 测试环境")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("host")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("编号")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("zookeeper")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("kafka")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("129.0.4.37")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("7")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("129.0.4.38")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("8")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("129.0.4.39")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("9")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")])])])]),t._v(" "),e("h5",{attrs:{id:"更多配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更多配置"}},[t._v("#")]),t._v(" 更多配置")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("java")]),t._v(" "),e("ul",[e("li",[t._v("版本：1.8.0_60")])])]),t._v(" "),e("li",[e("p",[t._v("zookeeper")]),t._v(" "),e("ul",[e("li",[t._v("安装路径：/app/apache-zookeeper-3.6.1-bin")]),t._v(" "),e("li",[t._v("数据路径：/data/zkData")]),t._v(" "),e("li",[t._v("端口：2181")])])]),t._v(" "),e("li",[e("p",[t._v("kafka")]),t._v(" "),e("ul",[e("li",[t._v("安装路径：/app/kafka_2.12-2.5.0")]),t._v(" "),e("li",[t._v("数据路径：/data/kfkData")]),t._v(" "),e("li",[t._v("端口：9092")])])]),t._v(" "),e("li",[e("p",[t._v("监控")]),t._v(" "),e("ul",[e("li",[t._v("方案："),e("a",{attrs:{href:"https://github.com/yahoo/CMAK",target:"_blank",rel:"noopener noreferrer"}},[t._v("CMAK"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("访问地址: http://129.0.4.34:9001/")]),t._v(" "),e("li",[t._v("JMX_PORT：9999\n"),e("strong",[t._v("注：")])])])]),t._v(" "),e("li",[e("p",[t._v("开发机（129.0.4.37~39）kafka 使用 2.3.1 版本")])]),t._v(" "),e("li",[e("p",[t._v("测试机（129.0.4.32~34）kafka 使用 2.5.0 版本")])])]),t._v(" "),e("hr"),t._v(" "),e("h5",{attrs:{id:"知识结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#知识结构"}},[t._v("#")]),t._v(" 知识结构")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.processon.com/view/link/5f0b427e5653bb6858b728f9",target:"_blank",rel:"noopener noreferrer"}},[t._v("脑图链接"),e("OutboundLink")],1)]),t._v(" "),e("hr"),t._v(" "),e("h4",{attrs:{id:"集群环境搭建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#集群环境搭建"}},[t._v("#")]),t._v(" 集群环境搭建")]),t._v(" "),e("h5",{attrs:{id:"环境准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[t._v("#")]),t._v(" 环境准备")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("host")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("zookeeper")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("kafka 编号")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("kafka")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("129.0.4.32")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("2")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("TODO")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("129.0.4.33")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("3")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("TODO")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("129.0.4.34")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("4")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("TODO")])])])]),t._v(" "),e("p",[t._v("zookeeper 集群搭建请参考 "),e("RouterLink",{attrs:{to:"/zookeeper/2.集群部署.html"}},[t._v("zookeeper 集群搭建指南")])],1),t._v(" "),e("h5",{attrs:{id:"kafka-安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kafka-安装"}},[t._v("#")]),t._v(" kafka 安装")]),t._v(" "),e("h5",{attrs:{id:"下载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[t._v("#")]),t._v(" 下载")]),t._v(" "),e("p",[t._v("http://kafka.apache.org/downloads.html")]),t._v(" "),e("p",[t._v("wget 下载")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("wget https://mirrors.tuna.tsinghua.edu.cn/apache/kafka/2.5.0/kafka_2.12-2.5.0.tgz\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h5",{attrs:{id:"解压"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解压"}},[t._v("#")]),t._v(" 解压")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("sudo tar -zxvf ~/Downloads/kafka_2.12-2.5.0.tgz -C /usr/local\ncd /usr/local\nsudo mv kafka_2.12-2.5.0/ kafka\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("h5",{attrs:{id:"修改配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[t._v("#")]),t._v(" 修改配置文件")]),t._v(" "),e("p",[t._v("cd /usr/local/kafka/config && sudo vim server.properties")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("broker.id=3 # broker 的全局唯一编号，不能重复")])]),t._v(" "),e("li",[e("p",[t._v("delete.topic.enable=true # 删除 topic 功能使能")])]),t._v(" "),e("li",[e("p",[t._v("zookeeper.connect=129.0.4.32:2181,129.0.4.33:2181,129.0.4.34:2181")])]),t._v(" "),e("li",[e("p",[t._v("log.dirs=/data/kfkData # kafka 运行日志存放的路径\n"),e("strong",[t._v("注:")])])]),t._v(" "),e("li",[e("p",[t._v("集群环境下，修改配置文件，broker.id 不得重复")])])]),t._v(" "),e("h5",{attrs:{id:"环境变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境变量"}},[t._v("#")]),t._v(" 环境变量")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# kafka\nexport KAFKA_HOME=/usr/local/kafka\nexport PATH=$PATH:$KAFKA_HOME/bin\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("source ~/.zhsrc")])])}),[],!1,null,null,null);e.default=v.exports}}]);