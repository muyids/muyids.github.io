<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>木易</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <meta name="description" content="闻道有先后，术业有专攻">
    
    <link rel="preload" href="/assets/css/0.styles.76b5fe3c.css" as="style"><link rel="preload" href="/assets/js/app.39affee4.js" as="script"><link rel="preload" href="/assets/js/2.ff5713a3.js" as="script"><link rel="preload" href="/assets/js/152.3520b0c9.js" as="script"><link rel="prefetch" href="/assets/js/10.4434fb5d.js"><link rel="prefetch" href="/assets/js/100.e1278315.js"><link rel="prefetch" href="/assets/js/101.51543da8.js"><link rel="prefetch" href="/assets/js/102.747961f1.js"><link rel="prefetch" href="/assets/js/103.75025ef4.js"><link rel="prefetch" href="/assets/js/104.8271c7f1.js"><link rel="prefetch" href="/assets/js/105.0d88b856.js"><link rel="prefetch" href="/assets/js/106.4bbe1d5e.js"><link rel="prefetch" href="/assets/js/107.46f7208e.js"><link rel="prefetch" href="/assets/js/108.78b30c18.js"><link rel="prefetch" href="/assets/js/109.e4f045b4.js"><link rel="prefetch" href="/assets/js/11.1962b238.js"><link rel="prefetch" href="/assets/js/110.52ff6e2e.js"><link rel="prefetch" href="/assets/js/111.9f3dfe4d.js"><link rel="prefetch" href="/assets/js/112.6546eeae.js"><link rel="prefetch" href="/assets/js/113.bb37ef0b.js"><link rel="prefetch" href="/assets/js/114.cbd9227b.js"><link rel="prefetch" href="/assets/js/115.0a65018d.js"><link rel="prefetch" href="/assets/js/116.776e193b.js"><link rel="prefetch" href="/assets/js/117.0a2c1f74.js"><link rel="prefetch" href="/assets/js/118.a5bb2e96.js"><link rel="prefetch" href="/assets/js/119.dcfa4f9b.js"><link rel="prefetch" href="/assets/js/12.04506331.js"><link rel="prefetch" href="/assets/js/120.5e51470d.js"><link rel="prefetch" href="/assets/js/121.e733a6f8.js"><link rel="prefetch" href="/assets/js/122.7ea6d42d.js"><link rel="prefetch" href="/assets/js/123.da79bc03.js"><link rel="prefetch" href="/assets/js/124.c51f38e3.js"><link rel="prefetch" href="/assets/js/125.82ecf7d0.js"><link rel="prefetch" href="/assets/js/126.71585cb1.js"><link rel="prefetch" href="/assets/js/127.d4129c00.js"><link rel="prefetch" href="/assets/js/128.66ee1e56.js"><link rel="prefetch" href="/assets/js/129.23abbcc3.js"><link rel="prefetch" href="/assets/js/13.96d48b9e.js"><link rel="prefetch" href="/assets/js/130.f975bb52.js"><link rel="prefetch" href="/assets/js/131.b9915d9a.js"><link rel="prefetch" href="/assets/js/132.978d50b7.js"><link rel="prefetch" href="/assets/js/133.2b14a609.js"><link rel="prefetch" href="/assets/js/134.5bd3b208.js"><link rel="prefetch" href="/assets/js/135.383c3825.js"><link rel="prefetch" href="/assets/js/136.9fd18645.js"><link rel="prefetch" href="/assets/js/137.566e6ba7.js"><link rel="prefetch" href="/assets/js/138.0298f956.js"><link rel="prefetch" href="/assets/js/139.4c5cf09d.js"><link rel="prefetch" href="/assets/js/14.d7b87645.js"><link rel="prefetch" href="/assets/js/140.caff73bc.js"><link rel="prefetch" href="/assets/js/141.41644ce1.js"><link rel="prefetch" href="/assets/js/142.7a113441.js"><link rel="prefetch" href="/assets/js/143.8d9e9221.js"><link rel="prefetch" href="/assets/js/144.be5348d5.js"><link rel="prefetch" href="/assets/js/145.b94f6a9f.js"><link rel="prefetch" href="/assets/js/146.b85b5b7b.js"><link rel="prefetch" href="/assets/js/147.06aefe1a.js"><link rel="prefetch" href="/assets/js/148.806916e4.js"><link rel="prefetch" href="/assets/js/149.be04d606.js"><link rel="prefetch" href="/assets/js/15.8d35c254.js"><link rel="prefetch" href="/assets/js/150.43471d42.js"><link rel="prefetch" href="/assets/js/151.f499e9b2.js"><link rel="prefetch" href="/assets/js/153.148fb53e.js"><link rel="prefetch" href="/assets/js/154.8a2b4a26.js"><link rel="prefetch" href="/assets/js/155.196c7095.js"><link rel="prefetch" href="/assets/js/156.7fd7f9fe.js"><link rel="prefetch" href="/assets/js/157.fee03272.js"><link rel="prefetch" href="/assets/js/158.04a8bc33.js"><link rel="prefetch" href="/assets/js/159.5d89d999.js"><link rel="prefetch" href="/assets/js/16.d9635075.js"><link rel="prefetch" href="/assets/js/160.bfacd336.js"><link rel="prefetch" href="/assets/js/161.ed6664cd.js"><link rel="prefetch" href="/assets/js/162.b13e95fa.js"><link rel="prefetch" href="/assets/js/163.a1934886.js"><link rel="prefetch" href="/assets/js/164.464cb72e.js"><link rel="prefetch" href="/assets/js/165.75d068c6.js"><link rel="prefetch" href="/assets/js/166.733b8ef8.js"><link rel="prefetch" href="/assets/js/167.fd32366d.js"><link rel="prefetch" href="/assets/js/168.368fc101.js"><link rel="prefetch" href="/assets/js/169.86924a43.js"><link rel="prefetch" href="/assets/js/17.72eaf2d1.js"><link rel="prefetch" href="/assets/js/170.1816b8b4.js"><link rel="prefetch" href="/assets/js/171.3e9b9d62.js"><link rel="prefetch" href="/assets/js/172.58bacd32.js"><link rel="prefetch" href="/assets/js/173.a69a0b9d.js"><link rel="prefetch" href="/assets/js/174.61c252dc.js"><link rel="prefetch" href="/assets/js/175.0345a8f0.js"><link rel="prefetch" href="/assets/js/176.536da5a0.js"><link rel="prefetch" href="/assets/js/177.1677bdc3.js"><link rel="prefetch" href="/assets/js/178.5fa52812.js"><link rel="prefetch" href="/assets/js/179.df92035c.js"><link rel="prefetch" href="/assets/js/18.c1ec2f84.js"><link rel="prefetch" href="/assets/js/180.094e7302.js"><link rel="prefetch" href="/assets/js/181.08de68e6.js"><link rel="prefetch" href="/assets/js/182.de365ee3.js"><link rel="prefetch" href="/assets/js/183.816f6a94.js"><link rel="prefetch" href="/assets/js/184.d525f427.js"><link rel="prefetch" href="/assets/js/185.55c65a27.js"><link rel="prefetch" href="/assets/js/186.a7069b83.js"><link rel="prefetch" href="/assets/js/187.2b776d2b.js"><link rel="prefetch" href="/assets/js/188.12c59efd.js"><link rel="prefetch" href="/assets/js/189.961c64a0.js"><link rel="prefetch" href="/assets/js/19.937fa891.js"><link rel="prefetch" href="/assets/js/190.3869ca5a.js"><link rel="prefetch" href="/assets/js/191.3b30fd8e.js"><link rel="prefetch" href="/assets/js/192.090f6cb0.js"><link rel="prefetch" href="/assets/js/193.bd9f65c2.js"><link rel="prefetch" href="/assets/js/194.d405ddca.js"><link rel="prefetch" href="/assets/js/195.7060fe89.js"><link rel="prefetch" href="/assets/js/196.9701decd.js"><link rel="prefetch" href="/assets/js/197.9ef98916.js"><link rel="prefetch" href="/assets/js/198.8362aa82.js"><link rel="prefetch" href="/assets/js/199.8ba7cd3f.js"><link rel="prefetch" href="/assets/js/20.e4d4b3dd.js"><link rel="prefetch" href="/assets/js/200.f9a68d4b.js"><link rel="prefetch" href="/assets/js/201.8e3ca368.js"><link rel="prefetch" href="/assets/js/202.8eb2ad5e.js"><link rel="prefetch" href="/assets/js/203.6ee9cfef.js"><link rel="prefetch" href="/assets/js/204.593beb80.js"><link rel="prefetch" href="/assets/js/205.d8ae09df.js"><link rel="prefetch" href="/assets/js/206.3871df31.js"><link rel="prefetch" href="/assets/js/207.81f73a34.js"><link rel="prefetch" href="/assets/js/208.0f45c950.js"><link rel="prefetch" href="/assets/js/209.8f9a68a7.js"><link rel="prefetch" href="/assets/js/21.3543feb7.js"><link rel="prefetch" href="/assets/js/210.762970f9.js"><link rel="prefetch" href="/assets/js/211.727f5648.js"><link rel="prefetch" href="/assets/js/212.8c51f861.js"><link rel="prefetch" href="/assets/js/213.81a42c70.js"><link rel="prefetch" href="/assets/js/214.8ff3554a.js"><link rel="prefetch" href="/assets/js/215.9fb76947.js"><link rel="prefetch" href="/assets/js/216.bcc3ba0c.js"><link rel="prefetch" href="/assets/js/217.cee59fd0.js"><link rel="prefetch" href="/assets/js/218.201fc31a.js"><link rel="prefetch" href="/assets/js/219.52e0eba4.js"><link rel="prefetch" href="/assets/js/22.af2011a5.js"><link rel="prefetch" href="/assets/js/220.683182cb.js"><link rel="prefetch" href="/assets/js/221.bbfd5fbf.js"><link rel="prefetch" href="/assets/js/222.60302558.js"><link rel="prefetch" href="/assets/js/223.d169e79e.js"><link rel="prefetch" href="/assets/js/224.616a5e79.js"><link rel="prefetch" href="/assets/js/225.8cea045c.js"><link rel="prefetch" href="/assets/js/226.61d870be.js"><link rel="prefetch" href="/assets/js/227.7704043a.js"><link rel="prefetch" href="/assets/js/228.472bc8df.js"><link rel="prefetch" href="/assets/js/229.c1c339b2.js"><link rel="prefetch" href="/assets/js/23.b151dc28.js"><link rel="prefetch" href="/assets/js/230.9dc490d4.js"><link rel="prefetch" href="/assets/js/231.32e7d4db.js"><link rel="prefetch" href="/assets/js/232.1eae9c32.js"><link rel="prefetch" href="/assets/js/233.3c3b5ece.js"><link rel="prefetch" href="/assets/js/234.e4d406ba.js"><link rel="prefetch" href="/assets/js/235.1703100e.js"><link rel="prefetch" href="/assets/js/236.8bc4f722.js"><link rel="prefetch" href="/assets/js/237.1171adbf.js"><link rel="prefetch" href="/assets/js/238.b0eef633.js"><link rel="prefetch" href="/assets/js/239.cd090649.js"><link rel="prefetch" href="/assets/js/24.f5421806.js"><link rel="prefetch" href="/assets/js/240.3d8ef05f.js"><link rel="prefetch" href="/assets/js/241.b20a6095.js"><link rel="prefetch" href="/assets/js/242.7c6aabe8.js"><link rel="prefetch" href="/assets/js/243.0559708e.js"><link rel="prefetch" href="/assets/js/244.ea342c94.js"><link rel="prefetch" href="/assets/js/245.0f3e2345.js"><link rel="prefetch" href="/assets/js/246.9c4a4811.js"><link rel="prefetch" href="/assets/js/247.6992f329.js"><link rel="prefetch" href="/assets/js/248.26e3f0a1.js"><link rel="prefetch" href="/assets/js/249.073b4e4f.js"><link rel="prefetch" href="/assets/js/25.feecd77e.js"><link rel="prefetch" href="/assets/js/250.5af8cf05.js"><link rel="prefetch" href="/assets/js/251.53aea24e.js"><link rel="prefetch" href="/assets/js/252.b1514d73.js"><link rel="prefetch" href="/assets/js/253.f1cf3521.js"><link rel="prefetch" href="/assets/js/254.269ae26f.js"><link rel="prefetch" href="/assets/js/255.bdb10093.js"><link rel="prefetch" href="/assets/js/256.11934c39.js"><link rel="prefetch" href="/assets/js/257.edc42b1f.js"><link rel="prefetch" href="/assets/js/258.63f8e7a2.js"><link rel="prefetch" href="/assets/js/259.1ecb2e82.js"><link rel="prefetch" href="/assets/js/26.a7356eea.js"><link rel="prefetch" href="/assets/js/260.cd8f69bd.js"><link rel="prefetch" href="/assets/js/261.bd7c4567.js"><link rel="prefetch" href="/assets/js/262.b7ac75fa.js"><link rel="prefetch" href="/assets/js/263.2f02b310.js"><link rel="prefetch" href="/assets/js/264.de2f5043.js"><link rel="prefetch" href="/assets/js/265.e1185c7b.js"><link rel="prefetch" href="/assets/js/266.2c4421b3.js"><link rel="prefetch" href="/assets/js/267.eebece1e.js"><link rel="prefetch" href="/assets/js/268.d44bea14.js"><link rel="prefetch" href="/assets/js/269.e0eb189c.js"><link rel="prefetch" href="/assets/js/27.ac8e7083.js"><link rel="prefetch" href="/assets/js/270.b87b8d97.js"><link rel="prefetch" href="/assets/js/271.91756435.js"><link rel="prefetch" href="/assets/js/272.3c41367c.js"><link rel="prefetch" href="/assets/js/273.b0be0167.js"><link rel="prefetch" href="/assets/js/274.476eb632.js"><link rel="prefetch" href="/assets/js/275.4bf4352e.js"><link rel="prefetch" href="/assets/js/276.62d9b490.js"><link rel="prefetch" href="/assets/js/277.287dd369.js"><link rel="prefetch" href="/assets/js/278.e1e55834.js"><link rel="prefetch" href="/assets/js/279.d2adb1c1.js"><link rel="prefetch" href="/assets/js/28.78a31c07.js"><link rel="prefetch" href="/assets/js/280.6b290f02.js"><link rel="prefetch" href="/assets/js/281.32a747b3.js"><link rel="prefetch" href="/assets/js/282.8f9f6177.js"><link rel="prefetch" href="/assets/js/283.67a16d86.js"><link rel="prefetch" href="/assets/js/284.72aefae0.js"><link rel="prefetch" href="/assets/js/285.de4ffd1b.js"><link rel="prefetch" href="/assets/js/286.c6172100.js"><link rel="prefetch" href="/assets/js/287.f6d7e436.js"><link rel="prefetch" href="/assets/js/288.28e6bc1c.js"><link rel="prefetch" href="/assets/js/289.84179386.js"><link rel="prefetch" href="/assets/js/29.612b233d.js"><link rel="prefetch" href="/assets/js/290.bb1f1775.js"><link rel="prefetch" href="/assets/js/291.1d6900ce.js"><link rel="prefetch" href="/assets/js/292.93068ffb.js"><link rel="prefetch" href="/assets/js/293.e41ef026.js"><link rel="prefetch" href="/assets/js/294.8092f399.js"><link rel="prefetch" href="/assets/js/295.fd743167.js"><link rel="prefetch" href="/assets/js/296.24fd64a0.js"><link rel="prefetch" href="/assets/js/297.acddb983.js"><link rel="prefetch" href="/assets/js/298.a4a96d5d.js"><link rel="prefetch" href="/assets/js/299.1d2a742c.js"><link rel="prefetch" href="/assets/js/3.dffed77b.js"><link rel="prefetch" href="/assets/js/30.cef58024.js"><link rel="prefetch" href="/assets/js/300.cd0205da.js"><link rel="prefetch" href="/assets/js/301.bb44f2e4.js"><link rel="prefetch" href="/assets/js/302.799854f8.js"><link rel="prefetch" href="/assets/js/303.6d4649ed.js"><link rel="prefetch" href="/assets/js/304.8a26ce65.js"><link rel="prefetch" href="/assets/js/305.bdd9ea31.js"><link rel="prefetch" href="/assets/js/306.a0a426bc.js"><link rel="prefetch" href="/assets/js/307.a33f4ad6.js"><link rel="prefetch" href="/assets/js/308.6272af73.js"><link rel="prefetch" href="/assets/js/309.06f8d95d.js"><link rel="prefetch" href="/assets/js/31.b8ea1490.js"><link rel="prefetch" href="/assets/js/310.387d9c10.js"><link rel="prefetch" href="/assets/js/311.19041339.js"><link rel="prefetch" href="/assets/js/312.05829acb.js"><link rel="prefetch" href="/assets/js/313.6c8b9371.js"><link rel="prefetch" href="/assets/js/314.ac6b6cca.js"><link rel="prefetch" href="/assets/js/315.38ad904b.js"><link rel="prefetch" href="/assets/js/316.477e03df.js"><link rel="prefetch" href="/assets/js/317.5ad5f43e.js"><link rel="prefetch" href="/assets/js/318.3ff10de9.js"><link rel="prefetch" href="/assets/js/319.47dc2f56.js"><link rel="prefetch" href="/assets/js/32.13e7f0be.js"><link rel="prefetch" href="/assets/js/320.9cc5ed93.js"><link rel="prefetch" href="/assets/js/321.5d2dd0ba.js"><link rel="prefetch" href="/assets/js/322.0b20fada.js"><link rel="prefetch" href="/assets/js/323.85dcc727.js"><link rel="prefetch" href="/assets/js/324.1fadc3be.js"><link rel="prefetch" href="/assets/js/325.90070a1d.js"><link rel="prefetch" href="/assets/js/326.6dddddd6.js"><link rel="prefetch" href="/assets/js/327.c04f3b6f.js"><link rel="prefetch" href="/assets/js/328.6a2b396c.js"><link rel="prefetch" href="/assets/js/329.80ffa060.js"><link rel="prefetch" href="/assets/js/33.5284d1a0.js"><link rel="prefetch" href="/assets/js/330.74ea6dda.js"><link rel="prefetch" href="/assets/js/331.42c61bf9.js"><link rel="prefetch" href="/assets/js/332.ee2db5d1.js"><link rel="prefetch" href="/assets/js/333.27612569.js"><link rel="prefetch" href="/assets/js/334.5033108b.js"><link rel="prefetch" href="/assets/js/335.9ac34c77.js"><link rel="prefetch" href="/assets/js/336.d5d6c9ce.js"><link rel="prefetch" href="/assets/js/337.da3d0e46.js"><link rel="prefetch" href="/assets/js/338.d1fcf133.js"><link rel="prefetch" href="/assets/js/339.a398b774.js"><link rel="prefetch" href="/assets/js/34.5fe4ca6d.js"><link rel="prefetch" href="/assets/js/340.67d8e482.js"><link rel="prefetch" href="/assets/js/341.af675d2d.js"><link rel="prefetch" href="/assets/js/342.1bbe4663.js"><link rel="prefetch" href="/assets/js/343.08a74f07.js"><link rel="prefetch" href="/assets/js/344.9b880944.js"><link rel="prefetch" href="/assets/js/345.52fe96f7.js"><link rel="prefetch" href="/assets/js/346.f354c869.js"><link rel="prefetch" href="/assets/js/347.1d0abe52.js"><link rel="prefetch" href="/assets/js/348.1a18618f.js"><link rel="prefetch" href="/assets/js/349.d2c7f692.js"><link rel="prefetch" href="/assets/js/35.4033032c.js"><link rel="prefetch" href="/assets/js/350.de7e1368.js"><link rel="prefetch" href="/assets/js/351.31668175.js"><link rel="prefetch" href="/assets/js/352.7aabeee0.js"><link rel="prefetch" href="/assets/js/353.96d0c5eb.js"><link rel="prefetch" href="/assets/js/354.56aa3a40.js"><link rel="prefetch" href="/assets/js/355.46c00436.js"><link rel="prefetch" href="/assets/js/356.847e3fe8.js"><link rel="prefetch" href="/assets/js/357.f17c7428.js"><link rel="prefetch" href="/assets/js/358.cdfe3274.js"><link rel="prefetch" href="/assets/js/359.960d928d.js"><link rel="prefetch" href="/assets/js/36.12996c02.js"><link rel="prefetch" href="/assets/js/360.7164c8eb.js"><link rel="prefetch" href="/assets/js/361.ff31defe.js"><link rel="prefetch" href="/assets/js/362.a7b8d602.js"><link rel="prefetch" href="/assets/js/363.aad65f07.js"><link rel="prefetch" href="/assets/js/364.9fe0be3e.js"><link rel="prefetch" href="/assets/js/365.d4c38ce5.js"><link rel="prefetch" href="/assets/js/366.d0063a61.js"><link rel="prefetch" href="/assets/js/367.508cb71f.js"><link rel="prefetch" href="/assets/js/368.415b0ebb.js"><link rel="prefetch" href="/assets/js/369.84d63f09.js"><link rel="prefetch" href="/assets/js/37.e98b1335.js"><link rel="prefetch" href="/assets/js/370.282ad440.js"><link rel="prefetch" href="/assets/js/371.6129a105.js"><link rel="prefetch" href="/assets/js/372.5f56bb7c.js"><link rel="prefetch" href="/assets/js/373.f809f970.js"><link rel="prefetch" href="/assets/js/374.62b0f694.js"><link rel="prefetch" href="/assets/js/375.91b33885.js"><link rel="prefetch" href="/assets/js/376.d8f620f4.js"><link rel="prefetch" href="/assets/js/377.464ef2e6.js"><link rel="prefetch" href="/assets/js/378.4dc1dcb2.js"><link rel="prefetch" href="/assets/js/379.cb15ce57.js"><link rel="prefetch" href="/assets/js/38.95e94cb8.js"><link rel="prefetch" href="/assets/js/380.2696b38a.js"><link rel="prefetch" href="/assets/js/381.68c1cdf2.js"><link rel="prefetch" href="/assets/js/382.3c031be1.js"><link rel="prefetch" href="/assets/js/383.8f8194d9.js"><link rel="prefetch" href="/assets/js/384.74def82f.js"><link rel="prefetch" href="/assets/js/385.544aa1ce.js"><link rel="prefetch" href="/assets/js/386.2c850b89.js"><link rel="prefetch" href="/assets/js/387.4b10b0aa.js"><link rel="prefetch" href="/assets/js/388.a5b21460.js"><link rel="prefetch" href="/assets/js/389.3f074bf3.js"><link rel="prefetch" href="/assets/js/39.69b69a45.js"><link rel="prefetch" href="/assets/js/390.dd51c9c5.js"><link rel="prefetch" href="/assets/js/391.f5b512b5.js"><link rel="prefetch" href="/assets/js/392.6fd29f82.js"><link rel="prefetch" href="/assets/js/393.44689b6a.js"><link rel="prefetch" href="/assets/js/394.934bc188.js"><link rel="prefetch" href="/assets/js/395.7a671230.js"><link rel="prefetch" href="/assets/js/396.09c8c34a.js"><link rel="prefetch" href="/assets/js/397.83f1d11f.js"><link rel="prefetch" href="/assets/js/398.827cfbc3.js"><link rel="prefetch" href="/assets/js/399.9cc8a5b7.js"><link rel="prefetch" href="/assets/js/4.ad4848bb.js"><link rel="prefetch" href="/assets/js/40.4f22871d.js"><link rel="prefetch" href="/assets/js/400.d6a2b081.js"><link rel="prefetch" href="/assets/js/401.e259f1d8.js"><link rel="prefetch" href="/assets/js/402.30e439ca.js"><link rel="prefetch" href="/assets/js/403.6ee64feb.js"><link rel="prefetch" href="/assets/js/404.d82e121a.js"><link rel="prefetch" href="/assets/js/405.9234c922.js"><link rel="prefetch" href="/assets/js/406.b54f0ed9.js"><link rel="prefetch" href="/assets/js/407.f5e13c9b.js"><link rel="prefetch" href="/assets/js/408.6299994a.js"><link rel="prefetch" href="/assets/js/409.a505f6bb.js"><link rel="prefetch" href="/assets/js/41.e961632c.js"><link rel="prefetch" href="/assets/js/410.baa88fe0.js"><link rel="prefetch" href="/assets/js/411.f8ba9913.js"><link rel="prefetch" href="/assets/js/412.54903c71.js"><link rel="prefetch" href="/assets/js/413.70d9fe49.js"><link rel="prefetch" href="/assets/js/414.086a2c2e.js"><link rel="prefetch" href="/assets/js/415.c3bb7952.js"><link rel="prefetch" href="/assets/js/416.456475f9.js"><link rel="prefetch" href="/assets/js/417.5696a935.js"><link rel="prefetch" href="/assets/js/418.1b3145a5.js"><link rel="prefetch" href="/assets/js/419.a3888440.js"><link rel="prefetch" href="/assets/js/42.cd70d0a7.js"><link rel="prefetch" href="/assets/js/420.02b3c87d.js"><link rel="prefetch" href="/assets/js/421.397fb996.js"><link rel="prefetch" href="/assets/js/422.8e1bedc6.js"><link rel="prefetch" href="/assets/js/423.e7ff49bc.js"><link rel="prefetch" href="/assets/js/424.e72f012e.js"><link rel="prefetch" href="/assets/js/425.764743e9.js"><link rel="prefetch" href="/assets/js/426.a335abcf.js"><link rel="prefetch" href="/assets/js/427.61fb448f.js"><link rel="prefetch" href="/assets/js/428.d36ab150.js"><link rel="prefetch" href="/assets/js/429.0dcc658a.js"><link rel="prefetch" href="/assets/js/43.13a3e0ab.js"><link rel="prefetch" href="/assets/js/430.97e498cf.js"><link rel="prefetch" href="/assets/js/431.c564d8a3.js"><link rel="prefetch" href="/assets/js/432.1d4a9cc7.js"><link rel="prefetch" href="/assets/js/433.89d97df4.js"><link rel="prefetch" href="/assets/js/434.36704ca8.js"><link rel="prefetch" href="/assets/js/435.c96e22a2.js"><link rel="prefetch" href="/assets/js/436.b1b36f26.js"><link rel="prefetch" href="/assets/js/437.a0d70297.js"><link rel="prefetch" href="/assets/js/438.56ee9404.js"><link rel="prefetch" href="/assets/js/439.30d4c9ca.js"><link rel="prefetch" href="/assets/js/44.2943660b.js"><link rel="prefetch" href="/assets/js/440.db99589c.js"><link rel="prefetch" href="/assets/js/441.6c49ac11.js"><link rel="prefetch" href="/assets/js/442.ff981480.js"><link rel="prefetch" href="/assets/js/443.b368d552.js"><link rel="prefetch" href="/assets/js/444.a0a89ee4.js"><link rel="prefetch" href="/assets/js/445.a963211d.js"><link rel="prefetch" href="/assets/js/446.e3d8737b.js"><link rel="prefetch" href="/assets/js/447.fa3b62a8.js"><link rel="prefetch" href="/assets/js/448.20b1be65.js"><link rel="prefetch" href="/assets/js/449.2b1c3f86.js"><link rel="prefetch" href="/assets/js/45.c6203d2c.js"><link rel="prefetch" href="/assets/js/450.46646d2c.js"><link rel="prefetch" href="/assets/js/451.eb871b67.js"><link rel="prefetch" href="/assets/js/452.5c46beea.js"><link rel="prefetch" href="/assets/js/453.f43f3a14.js"><link rel="prefetch" href="/assets/js/454.c81d5f2f.js"><link rel="prefetch" href="/assets/js/455.714bd5a6.js"><link rel="prefetch" href="/assets/js/456.659d2927.js"><link rel="prefetch" href="/assets/js/457.a87266eb.js"><link rel="prefetch" href="/assets/js/458.ac1a4a4a.js"><link rel="prefetch" href="/assets/js/459.da88763d.js"><link rel="prefetch" href="/assets/js/46.12f34fcd.js"><link rel="prefetch" href="/assets/js/460.94e03546.js"><link rel="prefetch" href="/assets/js/461.c1bb844e.js"><link rel="prefetch" href="/assets/js/462.8cc7ef49.js"><link rel="prefetch" href="/assets/js/463.76cd1085.js"><link rel="prefetch" href="/assets/js/464.29771844.js"><link rel="prefetch" href="/assets/js/465.f6468e1d.js"><link rel="prefetch" href="/assets/js/466.d910a92e.js"><link rel="prefetch" href="/assets/js/467.70adaeee.js"><link rel="prefetch" href="/assets/js/468.7048fb03.js"><link rel="prefetch" href="/assets/js/469.145f859a.js"><link rel="prefetch" href="/assets/js/47.916edd99.js"><link rel="prefetch" href="/assets/js/470.8a845346.js"><link rel="prefetch" href="/assets/js/471.afa1a239.js"><link rel="prefetch" href="/assets/js/472.df753c75.js"><link rel="prefetch" href="/assets/js/473.d99f9b24.js"><link rel="prefetch" href="/assets/js/474.cbc8e67e.js"><link rel="prefetch" href="/assets/js/475.53f93f25.js"><link rel="prefetch" href="/assets/js/476.2ef37478.js"><link rel="prefetch" href="/assets/js/477.adb9f0d7.js"><link rel="prefetch" href="/assets/js/478.ca0f6874.js"><link rel="prefetch" href="/assets/js/479.e2c05657.js"><link rel="prefetch" href="/assets/js/48.07e29a34.js"><link rel="prefetch" href="/assets/js/480.66ce289a.js"><link rel="prefetch" href="/assets/js/481.3b2ea4e6.js"><link rel="prefetch" href="/assets/js/482.301b7d10.js"><link rel="prefetch" href="/assets/js/483.1a613a87.js"><link rel="prefetch" href="/assets/js/484.ca980a19.js"><link rel="prefetch" href="/assets/js/485.c3fe9f74.js"><link rel="prefetch" href="/assets/js/486.237b91db.js"><link rel="prefetch" href="/assets/js/487.21257631.js"><link rel="prefetch" href="/assets/js/488.4b9d92cf.js"><link rel="prefetch" href="/assets/js/489.1fa33917.js"><link rel="prefetch" href="/assets/js/49.44ef08ee.js"><link rel="prefetch" href="/assets/js/490.03769f44.js"><link rel="prefetch" href="/assets/js/491.bff7e9e3.js"><link rel="prefetch" href="/assets/js/492.0bf8a210.js"><link rel="prefetch" href="/assets/js/493.0d584188.js"><link rel="prefetch" href="/assets/js/494.49834bd2.js"><link rel="prefetch" href="/assets/js/495.af5eab36.js"><link rel="prefetch" href="/assets/js/496.e79f04c6.js"><link rel="prefetch" href="/assets/js/497.bbe69e5f.js"><link rel="prefetch" href="/assets/js/498.8f1c1ce0.js"><link rel="prefetch" href="/assets/js/499.39de6d61.js"><link rel="prefetch" href="/assets/js/5.6bd637f1.js"><link rel="prefetch" href="/assets/js/50.6d744a7a.js"><link rel="prefetch" href="/assets/js/500.cab5e0a7.js"><link rel="prefetch" href="/assets/js/501.67bd0b79.js"><link rel="prefetch" href="/assets/js/502.8695a6e1.js"><link rel="prefetch" href="/assets/js/503.bf6849c0.js"><link rel="prefetch" href="/assets/js/504.6b76c85c.js"><link rel="prefetch" href="/assets/js/505.7d3da54c.js"><link rel="prefetch" href="/assets/js/506.c13a8d85.js"><link rel="prefetch" href="/assets/js/507.a1720f44.js"><link rel="prefetch" href="/assets/js/508.99561f6a.js"><link rel="prefetch" href="/assets/js/509.8d69d7c2.js"><link rel="prefetch" href="/assets/js/51.0b9dca7c.js"><link rel="prefetch" href="/assets/js/510.71c85e2f.js"><link rel="prefetch" href="/assets/js/511.ce388cea.js"><link rel="prefetch" href="/assets/js/512.23efa5c3.js"><link rel="prefetch" href="/assets/js/513.181e4434.js"><link rel="prefetch" href="/assets/js/514.5fa2ac27.js"><link rel="prefetch" href="/assets/js/515.2f6ead9b.js"><link rel="prefetch" href="/assets/js/516.d3572816.js"><link rel="prefetch" href="/assets/js/517.46749694.js"><link rel="prefetch" href="/assets/js/518.1c73491b.js"><link rel="prefetch" href="/assets/js/519.23c0ee87.js"><link rel="prefetch" href="/assets/js/52.46255e06.js"><link rel="prefetch" href="/assets/js/520.ced8488a.js"><link rel="prefetch" href="/assets/js/521.6fe568ee.js"><link rel="prefetch" href="/assets/js/522.ec341290.js"><link rel="prefetch" href="/assets/js/523.48291a9b.js"><link rel="prefetch" href="/assets/js/524.f7b0a2aa.js"><link rel="prefetch" href="/assets/js/525.02b33491.js"><link rel="prefetch" href="/assets/js/526.c4a69ec9.js"><link rel="prefetch" href="/assets/js/527.e1d04855.js"><link rel="prefetch" href="/assets/js/528.1f13e432.js"><link rel="prefetch" href="/assets/js/529.675c127b.js"><link rel="prefetch" href="/assets/js/53.35d8683d.js"><link rel="prefetch" href="/assets/js/530.4e59cc4e.js"><link rel="prefetch" href="/assets/js/531.7933f352.js"><link rel="prefetch" href="/assets/js/532.f8d8e3ea.js"><link rel="prefetch" href="/assets/js/533.98d754ff.js"><link rel="prefetch" href="/assets/js/534.f05c87e7.js"><link rel="prefetch" href="/assets/js/535.2e7eeb00.js"><link rel="prefetch" href="/assets/js/536.73384080.js"><link rel="prefetch" href="/assets/js/537.86284bbe.js"><link rel="prefetch" href="/assets/js/538.8b3b58bf.js"><link rel="prefetch" href="/assets/js/539.0fef532d.js"><link rel="prefetch" href="/assets/js/54.b3e544a2.js"><link rel="prefetch" href="/assets/js/540.0c5e0be2.js"><link rel="prefetch" href="/assets/js/541.76c9072b.js"><link rel="prefetch" href="/assets/js/542.dbe200af.js"><link rel="prefetch" href="/assets/js/543.0ccc4237.js"><link rel="prefetch" href="/assets/js/544.80971a11.js"><link rel="prefetch" href="/assets/js/545.eb310a0e.js"><link rel="prefetch" href="/assets/js/546.272dd410.js"><link rel="prefetch" href="/assets/js/547.b3d41464.js"><link rel="prefetch" href="/assets/js/548.87d5afd0.js"><link rel="prefetch" href="/assets/js/549.6bde91ca.js"><link rel="prefetch" href="/assets/js/55.4b0067fe.js"><link rel="prefetch" href="/assets/js/550.2f9f7d77.js"><link rel="prefetch" href="/assets/js/551.0edcccad.js"><link rel="prefetch" href="/assets/js/552.fc48a3c8.js"><link rel="prefetch" href="/assets/js/553.4fa2e758.js"><link rel="prefetch" href="/assets/js/554.5d5f6788.js"><link rel="prefetch" href="/assets/js/555.879cbcdb.js"><link rel="prefetch" href="/assets/js/556.9066f380.js"><link rel="prefetch" href="/assets/js/557.cc643b89.js"><link rel="prefetch" href="/assets/js/558.b11aa20a.js"><link rel="prefetch" href="/assets/js/559.e6e86a50.js"><link rel="prefetch" href="/assets/js/56.8191dcd8.js"><link rel="prefetch" href="/assets/js/560.3bb9fc02.js"><link rel="prefetch" href="/assets/js/561.d12a0619.js"><link rel="prefetch" href="/assets/js/562.3cf879ad.js"><link rel="prefetch" href="/assets/js/563.de36d181.js"><link rel="prefetch" href="/assets/js/564.3a061abe.js"><link rel="prefetch" href="/assets/js/565.8565416c.js"><link rel="prefetch" href="/assets/js/566.5b71ea2f.js"><link rel="prefetch" href="/assets/js/567.3cf6efb3.js"><link rel="prefetch" href="/assets/js/568.d4707f26.js"><link rel="prefetch" href="/assets/js/569.d3180560.js"><link rel="prefetch" href="/assets/js/57.527db1c1.js"><link rel="prefetch" href="/assets/js/570.1ebc466a.js"><link rel="prefetch" href="/assets/js/571.61cbe646.js"><link rel="prefetch" href="/assets/js/572.9821234f.js"><link rel="prefetch" href="/assets/js/573.77703e3c.js"><link rel="prefetch" href="/assets/js/574.34dafbb9.js"><link rel="prefetch" href="/assets/js/575.a78d0652.js"><link rel="prefetch" href="/assets/js/576.a271b347.js"><link rel="prefetch" href="/assets/js/577.1d1fcc43.js"><link rel="prefetch" href="/assets/js/578.70ceb31a.js"><link rel="prefetch" href="/assets/js/579.3bd430ec.js"><link rel="prefetch" href="/assets/js/58.a7713a84.js"><link rel="prefetch" href="/assets/js/580.e4a110a3.js"><link rel="prefetch" href="/assets/js/581.87ebaab8.js"><link rel="prefetch" href="/assets/js/582.fe02abb1.js"><link rel="prefetch" href="/assets/js/583.32b58b4c.js"><link rel="prefetch" href="/assets/js/584.30d94f08.js"><link rel="prefetch" href="/assets/js/585.2545d426.js"><link rel="prefetch" href="/assets/js/586.a435c099.js"><link rel="prefetch" href="/assets/js/587.5d9538f8.js"><link rel="prefetch" href="/assets/js/588.cb532ba2.js"><link rel="prefetch" href="/assets/js/589.53071219.js"><link rel="prefetch" href="/assets/js/59.47f77376.js"><link rel="prefetch" href="/assets/js/590.954fbea4.js"><link rel="prefetch" href="/assets/js/591.57f39210.js"><link rel="prefetch" href="/assets/js/592.9a7eb77f.js"><link rel="prefetch" href="/assets/js/593.ab78f508.js"><link rel="prefetch" href="/assets/js/594.1734e52b.js"><link rel="prefetch" href="/assets/js/595.18ad3e9d.js"><link rel="prefetch" href="/assets/js/596.c1e71f05.js"><link rel="prefetch" href="/assets/js/597.b38d9fef.js"><link rel="prefetch" href="/assets/js/598.2dfe4fe3.js"><link rel="prefetch" href="/assets/js/599.264c41e4.js"><link rel="prefetch" href="/assets/js/6.ef2463e0.js"><link rel="prefetch" href="/assets/js/60.7fdb1d94.js"><link rel="prefetch" href="/assets/js/600.96efb4d6.js"><link rel="prefetch" href="/assets/js/601.a3e35509.js"><link rel="prefetch" href="/assets/js/602.2633ad5e.js"><link rel="prefetch" href="/assets/js/603.e5e1fa60.js"><link rel="prefetch" href="/assets/js/604.02dac041.js"><link rel="prefetch" href="/assets/js/605.2ee34663.js"><link rel="prefetch" href="/assets/js/606.6e1d5206.js"><link rel="prefetch" href="/assets/js/607.e2838ab4.js"><link rel="prefetch" href="/assets/js/608.39f7b92d.js"><link rel="prefetch" href="/assets/js/609.291d2b3b.js"><link rel="prefetch" href="/assets/js/61.b34452fb.js"><link rel="prefetch" href="/assets/js/610.d937f806.js"><link rel="prefetch" href="/assets/js/611.3ed33b35.js"><link rel="prefetch" href="/assets/js/612.13bf9cfb.js"><link rel="prefetch" href="/assets/js/613.b1282ae8.js"><link rel="prefetch" href="/assets/js/614.9b955164.js"><link rel="prefetch" href="/assets/js/615.2b80b376.js"><link rel="prefetch" href="/assets/js/616.1d52d5a8.js"><link rel="prefetch" href="/assets/js/617.23b85f7a.js"><link rel="prefetch" href="/assets/js/618.02d89d9b.js"><link rel="prefetch" href="/assets/js/619.cf3f25b5.js"><link rel="prefetch" href="/assets/js/62.638fde74.js"><link rel="prefetch" href="/assets/js/620.1e42d3c3.js"><link rel="prefetch" href="/assets/js/621.80c10740.js"><link rel="prefetch" href="/assets/js/622.475ee9dd.js"><link rel="prefetch" href="/assets/js/623.1e25be86.js"><link rel="prefetch" href="/assets/js/624.15c7190e.js"><link rel="prefetch" href="/assets/js/625.911a619a.js"><link rel="prefetch" href="/assets/js/626.176406f3.js"><link rel="prefetch" href="/assets/js/627.8fb36116.js"><link rel="prefetch" href="/assets/js/628.637a4563.js"><link rel="prefetch" href="/assets/js/629.242596b2.js"><link rel="prefetch" href="/assets/js/63.f4a57417.js"><link rel="prefetch" href="/assets/js/630.8ead7f31.js"><link rel="prefetch" href="/assets/js/631.f2b9c2ec.js"><link rel="prefetch" href="/assets/js/632.d6d311a6.js"><link rel="prefetch" href="/assets/js/633.822e51aa.js"><link rel="prefetch" href="/assets/js/634.24be5bb3.js"><link rel="prefetch" href="/assets/js/635.a838a033.js"><link rel="prefetch" href="/assets/js/636.3f84e09c.js"><link rel="prefetch" href="/assets/js/637.5fd1f35d.js"><link rel="prefetch" href="/assets/js/638.43b5e764.js"><link rel="prefetch" href="/assets/js/639.4676a8eb.js"><link rel="prefetch" href="/assets/js/64.2dc72d2f.js"><link rel="prefetch" href="/assets/js/640.161e8fba.js"><link rel="prefetch" href="/assets/js/641.ad4c516d.js"><link rel="prefetch" href="/assets/js/642.f28e7d8c.js"><link rel="prefetch" href="/assets/js/643.a2bcbf4d.js"><link rel="prefetch" href="/assets/js/644.daca2dd4.js"><link rel="prefetch" href="/assets/js/645.22d5f94c.js"><link rel="prefetch" href="/assets/js/646.9bc7c139.js"><link rel="prefetch" href="/assets/js/647.516ba2d1.js"><link rel="prefetch" href="/assets/js/648.0ac4a538.js"><link rel="prefetch" href="/assets/js/649.7f461f9a.js"><link rel="prefetch" href="/assets/js/65.2ff5d8c5.js"><link rel="prefetch" href="/assets/js/650.ec8908e8.js"><link rel="prefetch" href="/assets/js/651.1fb5988f.js"><link rel="prefetch" href="/assets/js/652.e08523e1.js"><link rel="prefetch" href="/assets/js/653.8d3d292a.js"><link rel="prefetch" href="/assets/js/654.4c5b08ad.js"><link rel="prefetch" href="/assets/js/655.fb2d5a4d.js"><link rel="prefetch" href="/assets/js/656.a4191365.js"><link rel="prefetch" href="/assets/js/657.238c95b0.js"><link rel="prefetch" href="/assets/js/658.28c91fc5.js"><link rel="prefetch" href="/assets/js/659.753d49f4.js"><link rel="prefetch" href="/assets/js/66.bfcbfa97.js"><link rel="prefetch" href="/assets/js/660.dd3d140a.js"><link rel="prefetch" href="/assets/js/661.a2a28530.js"><link rel="prefetch" href="/assets/js/662.0a2c6904.js"><link rel="prefetch" href="/assets/js/663.96db6c79.js"><link rel="prefetch" href="/assets/js/664.d0dae8dc.js"><link rel="prefetch" href="/assets/js/665.4bd24d84.js"><link rel="prefetch" href="/assets/js/666.d7ba4d34.js"><link rel="prefetch" href="/assets/js/667.134bb139.js"><link rel="prefetch" href="/assets/js/668.abb5f65e.js"><link rel="prefetch" href="/assets/js/669.a7b3d51c.js"><link rel="prefetch" href="/assets/js/67.28cac9c6.js"><link rel="prefetch" href="/assets/js/670.e8aa30cc.js"><link rel="prefetch" href="/assets/js/671.0b9006ae.js"><link rel="prefetch" href="/assets/js/672.6212da10.js"><link rel="prefetch" href="/assets/js/673.0f9eed32.js"><link rel="prefetch" href="/assets/js/674.e50bd6bd.js"><link rel="prefetch" href="/assets/js/675.e254aa68.js"><link rel="prefetch" href="/assets/js/676.16095212.js"><link rel="prefetch" href="/assets/js/677.bf2a2bef.js"><link rel="prefetch" href="/assets/js/678.219756a9.js"><link rel="prefetch" href="/assets/js/679.f7b43ba6.js"><link rel="prefetch" href="/assets/js/68.3c3825f1.js"><link rel="prefetch" href="/assets/js/680.46f81b9e.js"><link rel="prefetch" href="/assets/js/681.687976fe.js"><link rel="prefetch" href="/assets/js/682.2f45ed84.js"><link rel="prefetch" href="/assets/js/683.d3fc96e9.js"><link rel="prefetch" href="/assets/js/684.337722fc.js"><link rel="prefetch" href="/assets/js/685.a2c2f6cf.js"><link rel="prefetch" href="/assets/js/686.8994d97e.js"><link rel="prefetch" href="/assets/js/687.3294dfff.js"><link rel="prefetch" href="/assets/js/688.d7794c58.js"><link rel="prefetch" href="/assets/js/689.b567b6bf.js"><link rel="prefetch" href="/assets/js/69.7fb2fc3e.js"><link rel="prefetch" href="/assets/js/690.8dce4e45.js"><link rel="prefetch" href="/assets/js/691.8ecc8428.js"><link rel="prefetch" href="/assets/js/692.2a1ab014.js"><link rel="prefetch" href="/assets/js/693.aaa51c8b.js"><link rel="prefetch" href="/assets/js/694.1210fc9e.js"><link rel="prefetch" href="/assets/js/695.7e5d66ce.js"><link rel="prefetch" href="/assets/js/696.0dee99a6.js"><link rel="prefetch" href="/assets/js/697.ee33958e.js"><link rel="prefetch" href="/assets/js/698.2d70ee18.js"><link rel="prefetch" href="/assets/js/699.950f9237.js"><link rel="prefetch" href="/assets/js/7.4545527f.js"><link rel="prefetch" href="/assets/js/70.a0b81ebb.js"><link rel="prefetch" href="/assets/js/700.7581b22e.js"><link rel="prefetch" href="/assets/js/701.88acb0a0.js"><link rel="prefetch" href="/assets/js/702.2b8ed2be.js"><link rel="prefetch" href="/assets/js/703.6317d902.js"><link rel="prefetch" href="/assets/js/704.0c5eaac2.js"><link rel="prefetch" href="/assets/js/705.b1138571.js"><link rel="prefetch" href="/assets/js/706.013e2619.js"><link rel="prefetch" href="/assets/js/707.80b25690.js"><link rel="prefetch" href="/assets/js/708.94a18498.js"><link rel="prefetch" href="/assets/js/709.d61baf50.js"><link rel="prefetch" href="/assets/js/71.b4cebb98.js"><link rel="prefetch" href="/assets/js/710.cd4ead5c.js"><link rel="prefetch" href="/assets/js/711.c10edd4e.js"><link rel="prefetch" href="/assets/js/712.deb1dbfa.js"><link rel="prefetch" href="/assets/js/713.52619a76.js"><link rel="prefetch" href="/assets/js/714.92d6132e.js"><link rel="prefetch" href="/assets/js/715.f4220f00.js"><link rel="prefetch" href="/assets/js/716.f366312a.js"><link rel="prefetch" href="/assets/js/717.5ddad930.js"><link rel="prefetch" href="/assets/js/718.630eb504.js"><link rel="prefetch" href="/assets/js/719.5c53c240.js"><link rel="prefetch" href="/assets/js/72.1c1796e7.js"><link rel="prefetch" href="/assets/js/720.98331c69.js"><link rel="prefetch" href="/assets/js/721.07235c95.js"><link rel="prefetch" href="/assets/js/722.6742c256.js"><link rel="prefetch" href="/assets/js/723.47572d91.js"><link rel="prefetch" href="/assets/js/724.2fd5cfff.js"><link rel="prefetch" href="/assets/js/725.ba9ad53e.js"><link rel="prefetch" href="/assets/js/726.fa8842dc.js"><link rel="prefetch" href="/assets/js/727.ee89aa16.js"><link rel="prefetch" href="/assets/js/728.b9ee281e.js"><link rel="prefetch" href="/assets/js/73.5d9a509e.js"><link rel="prefetch" href="/assets/js/74.9b568264.js"><link rel="prefetch" href="/assets/js/75.9a78880c.js"><link rel="prefetch" href="/assets/js/76.af4aad8d.js"><link rel="prefetch" href="/assets/js/77.09d50720.js"><link rel="prefetch" href="/assets/js/78.5dd0c117.js"><link rel="prefetch" href="/assets/js/79.a9de43dd.js"><link rel="prefetch" href="/assets/js/8.941a6527.js"><link rel="prefetch" href="/assets/js/80.7de48b11.js"><link rel="prefetch" href="/assets/js/81.d4ffb24a.js"><link rel="prefetch" href="/assets/js/82.4bd037f1.js"><link rel="prefetch" href="/assets/js/83.46532ae8.js"><link rel="prefetch" href="/assets/js/84.88dc42a1.js"><link rel="prefetch" href="/assets/js/85.4244348c.js"><link rel="prefetch" href="/assets/js/86.4d7f7a23.js"><link rel="prefetch" href="/assets/js/87.0f82bbcd.js"><link rel="prefetch" href="/assets/js/88.68e3b8a6.js"><link rel="prefetch" href="/assets/js/89.ea93553a.js"><link rel="prefetch" href="/assets/js/9.fefc0e4b.js"><link rel="prefetch" href="/assets/js/90.8b2ce705.js"><link rel="prefetch" href="/assets/js/91.1b6b9aee.js"><link rel="prefetch" href="/assets/js/92.233b2433.js"><link rel="prefetch" href="/assets/js/93.8743a0f3.js"><link rel="prefetch" href="/assets/js/94.62f8292f.js"><link rel="prefetch" href="/assets/js/95.6f1388f6.js"><link rel="prefetch" href="/assets/js/96.1352ad31.js"><link rel="prefetch" href="/assets/js/97.4f7b3c9f.js"><link rel="prefetch" href="/assets/js/98.844575cd.js"><link rel="prefetch" href="/assets/js/99.d355f1d0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.76b5fe3c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://muyids.oss-cn-beijing.aliyuncs.com/run.jpeg" alt="木易" class="logo"> <span class="site-name can-hide">木易</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  HOME
</a></div><div class="nav-item"><a href="/算法/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/run/" class="nav-link">
  跑步
</a></div><div class="nav-item"><a href="https://github.com/muyids" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GITHUB
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  HOME
</a></div><div class="nav-item"><a href="/算法/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/run/" class="nav-link">
  跑步
</a></div><div class="nav-item"><a href="https://github.com/muyids" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GITHUB
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><ul><li>java 内存模型 JMM</li> <li>volatile</li> <li>synchronized</li> <li>CAS</li> <li>线程不安全</li> <li>锁</li> <li>AQS</li> <li>并发组件
<ul><li>线程池</li> <li>阻塞队列</li> <li>FutureTask</li> <li>Lock 和 Condition</li></ul></li> <li>并发工具类
<ul><li>CountDownLatch</li> <li>CyclicBarrier</li> <li>Semaphore</li></ul></li> <li>死锁定位分析</li></ul> <hr> <h4 id="java-内存模型-jmm"><a href="#java-内存模型-jmm" class="header-anchor">#</a> java 内存模型 JMM</h4> <p>![2021-11-08 pm3.35.10](https://muyids.oss-cn-beijing.aliyuncs.com/2021-11-08 pm3.35.10.png)</p> <p>JVM 内存模型是什么？
（1）JVM 内存模型共分为 5 个区：
栈区（java 虚拟机栈），堆区</p> <p>本地方法栈，程序计数器，方法区（元空间）</p> <p>（2）各个区各自的作用：
a. 本地方法栈：存放 C++的 native 方法的栈区
b. 程序计数器：记录各个线程执行的字节码的位置
c. 方法区（jdk7 之前永久代，Java8 叫<strong>元空间</strong>）：主要用于存储静态方法成员变量 static, 类加载器 classloader 等信息
d. Java 虚拟机栈：用于存储局部变量，对象地址
e.堆：对象实例
（3）线程私有、公有
a.线程私有：每个线程在开辟、运行的过程中会单独创建这样的一份内存，有多少个线程可能有多少个内存
<strong>Java 虚拟机栈、本地方法栈、程序计数器是线程私有的</strong>
b.线程全局共享的
堆和方法区
（4）栈虽然方法运行完毕了之后被清空了，但是堆上面的还没有被清空，所以引出了 GC（垃圾回收），不能立马删除，因为不知道是否还有其它的也是引用了当前的地址来访问的</p> <h4 id="volatile"><a href="#volatile" class="header-anchor">#</a> volatile</h4> <ul><li>可见性：volatile 修饰的变量：直接操作主存；主动写入主存，读取时也从主存读取</li> <li>有序性：禁止指令重排序</li> <li>不保证原子性</li></ul> <h4 id="synchronized"><a href="#synchronized" class="header-anchor">#</a> synchronized</h4> <ul><li><p>原子性内置锁，也称“监视器锁”</p></li> <li><p>遍历后同步代码块前后加上 monitorenter, monitorexit 字节码指令</p></li> <li><p>依赖操作系统底层互斥锁实现</p></li> <li><p>主要作用是实现原子性操作 和 解决共享变量的内存可见性问题
工作原理：</p></li> <li><p>执行 monitorenter 指令尝试获取对象锁，获取成功，锁计数器+1</p></li> <li><p>排他锁，一个线程获取锁后，其他线程进入等待队列</p></li> <li><p>执行 monitorexit 指令，锁计数器-1，值为 0 时，锁释放，等待中的线程再继续竞争</p></li></ul> <p>缺点：</p> <ul><li><p>由于 java 中的线程和操作系统原生线程是一一对应的，线程被阻塞或唤醒会从用户态切换到内核态，非常消耗性能</p></li> <li><p>从内存语义来说，加锁的过程会清除工作内存中的共享变量，再从主内存读取，而释放锁的过程则是将工作内存中的共享变量写回主内存。
锁优化机制：</p></li> <li><p>从 JDK1.6 版本之后，synchronized 在不断优化锁的机制</p></li> <li><p>优化机制包括自适应锁、自旋锁、锁消除、锁粗化、轻量级锁和偏向锁</p></li> <li><p>锁的状态从低到高依次为<strong>无锁-&gt;偏向锁-&gt;轻量级锁-&gt;重量级锁</strong></p></li> <li><p><strong>自旋锁</strong>：</p> <ul><li>大部分时间，锁占用时间很短，没必要挂起线程，因为用户态和内核态的上下文切换严重影响性能；</li> <li>自旋：让线程执行忙循环，默认 10 次，可以通过-XX:PreBlockSpin 设置。</li></ul></li> <li><p>自适应锁：</p> <ul><li>自适应的自旋锁</li> <li>自旋时间不固定，由上一次在同一个锁上的自旋时间和锁的持有者状态来决定</li></ul></li> <li><p>锁消除：</p> <ul><li>JVM 检测一些同步代码块，完全不存在数据竞争的场景，不需要加锁，进行锁消除</li></ul></li> <li><p>锁粗化：</p> <ul><li>很多操作对同一个对象加锁，会把锁的同步范围扩展到整个操作序列之外</li></ul></li> <li><p>偏向锁</p> <ul><li>线程访问同步块获取锁时，会在对象头和栈帧的锁记录里存储线程 ID</li> <li>此线程再次进入同步块时就不需要 CAS 来加锁和解锁了</li> <li>偏向锁永远偏向第一个获取锁的线程</li> <li>当有其他线程竞争偏向锁时，持有偏向锁的线程会释放偏向锁</li> <li>设置-XX:+UseBiasedLocking 开启偏向锁</li></ul></li> <li><p>轻量级锁：</p> <ul><li>对象头中包含有一些锁的标志位</li> <li>代码进入同步块的时候，JVM 将会使用 CAS 方式来尝试获取锁</li> <li>如果更新成功则会把对象头中的状态位标记为轻量级锁，如果更新失败，当前线程就尝试自旋来获得锁</li></ul></li></ul> <p>总结：</p> <ul><li><p>偏向锁：通过对象头的偏向线程 ID 来对比，甚至都不需要 CAS 了</p></li> <li><p>轻量级锁：通过 CAS 修改对象头锁记录和自旋来实现</p></li> <li><p>重量级锁是除了拥有锁的线程其他全部阻塞
<strong>volitale 和 synchronized 的区别</strong></p></li></ul> <ol><li>volitale 关键字提供了一个功能，就是被其修饰的变量在被修改后会被强制刷入到主内存中，其他处理器的缓存由于遵守了缓存一致性原则，会把这个变量的值从主内存中加载到自己的缓存中，因此在并发编程中保证了变量的可见性。</li> <li>volitale 关键字会禁止指令重排，从而来保证有序性</li> <li>volitale 关键字不能保证原子性</li> <li>synchronized 可以保证原子性，通过字节码指令 monitorenter 和 monitorexit</li> <li>synchronized 可以保证可见性</li> <li>synchronized 关键字保证同一时刻只允许一条线程操作，从而保证了有序性</li></ol> <h4 id="cas"><a href="#cas" class="header-anchor">#</a> CAS</h4> <ul><li><p>cas(compare &amp; swap)实际上是一种<strong>无锁编程</strong></p></li> <li><p>核心问题：compare 和 swap 必须“被绑定”，是原子的</p></li> <li><p>CAS 原子性的实现：各种不同架构的 CPU 都提供了<strong>指令级别的 CAS 原子操作</strong></p> <p>比如：x86 架构下，通过<code>cmpxchg</code>指令支持 cas；arm 架构下，通过<code>LL/SC</code>来实现 cas；也就是说，不需要通过操作系统的同步原语（比如 mutex），cpu 已经原生支持了 cas；这样我们也就不再依赖锁来进行线程同步，但这并不意味着无锁能完全替代有锁</p></li></ul> <p>三个操作数：</p> <ul><li>V : 变量内存地址</li> <li>A：旧的预期值</li> <li>B：要设置的新值</li></ul> <p>CAS 的问题：</p> <ul><li>ABA 问题 =&gt; 用版本号解决；Java 中有 AtomicStampedReference 来解决这个问题，加入了预期标志和更新后标志两个字段</li> <li>循环时间长开销大：自旋 CAS 的方式如果长时间不成功，会给 CPU 带来很大的开销。</li> <li><strong>只能保证一个共享变量的原子操作</strong>：多个共享变量可以通过 AtomicReference 来处理或者使用锁 synchronized 实现</li></ul> <p>compare and swap - 乐观锁</p> <p>AutomicInteger: 自旋锁； <strong>i++线程不安全</strong>；判断当前用到的变量和内存中的变量是否相同，如果一致+1，如果不一致，使用 while 循环，相当于自旋</p> <p>AutomicReference : 原子引用 （用 ABA 问题）</p> <p>AutomicStampedReference: 带版本号的原子引用 （解决 ABA 问题）</p> <h4 id="线程不安全集合"><a href="#线程不安全集合" class="header-anchor">#</a> 线程不安全集合</h4> <p>高并发环境下会报异常：java.util.ConcurrentModificationException</p> <p>解决办法，使用线程安全的集合：</p> <p>比如：ArrayList: 定义空数组 Object[]，第一次 add 的时候判断如果是空数组初始化容量是 10</p> <ul><li><p>Collections.synchronizedList</p></li> <li><p>CopyOnWriteArrayList() : 读写分离，写时复制；读取完全不加锁，写入也不会阻塞读取操作，只有写入和写入之间需要进行同步等待，读操作的性能得到大幅度提升
HashSet: 底层是 hashMap，key 是 set 的值，value 是一个固定的 object 常量</p></li> <li><p>Collections.synchronizedSet()</p></li> <li><p>CopyOnWriteArraySet() ; 底层是 CopyOnWriteArrayList()
HashMap:</p></li> <li><p>ConcurrentHashMap ; 比较好用</p></li> <li><p>Collections.synchronizedMap()</p></li></ul> <h4 id="锁"><a href="#锁" class="header-anchor">#</a> 锁</h4> <p>① 公平锁</p> <ul><li>队列；先来先得；new ReentrantLock(true);</li></ul> <p>② 非公平锁</p> <ul><li>可以插队（可造成优先级反转和饥饿现象）；new ReentranLock();</li></ul> <p>③ 可重入锁（递归锁）</p> <ul><li><p>ReentrantLock / Syncronized 类似于大门钥匙 -- 防止死锁</p></li> <li><p>同一线程外层函数获得锁后，内层递归函数仍然能获取该锁（内层会自动获取锁）</p></li> <li><p>即：线程可以进入任何一个它已经拥有的锁所同步着的代码块</p></li></ul> <p>④ 自旋锁</p> <ul><li><p>尝试获取锁的线程不会立即阻塞，而是采用循环的方式获取锁</p></li> <li><p>好处：减少线程上下文切换的消耗，缺点：循环会消耗 cpu</p></li></ul> <p>⑤ 排他锁，独占锁（写）</p> <ul><li><p>该锁一次只能被一个线程持有；</p></li> <li><p>ReentranLock / Syncronized</p></li></ul> <p>⑥ 共享锁（读）</p> <ul><li><p>没有比自己版本号小的写请求</p></li> <li><p>该锁可被多个线程所持有</p></li> <li><p>ReentranReadWriteLock : 读锁是共享锁，写锁是独占锁</p></li> <li><p>读锁的共享锁可保证并发读是非常高效的，读写，写读，写写的过程是互斥的</p></li> <li><p>写操作：原子+独占</p></li></ul> <h4 id="aqs"><a href="#aqs" class="header-anchor">#</a> AQS</h4> <ul><li>抽象队列同步器 AbstractQueuedSynchronizer（以下简称同步器）</li> <li>用来构建锁或者其他同步组件的基础框架</li> <li>使用一个 int 成员变量 state 表示同步状态</li> <li>通过内置的 FIFO 队列来完成资源获取线程的排队工作</li> <li>并发包的作者（Doug Lea）期望它能够成为实现大部分同步需求的基础</li></ul> <h4 id="并发组件和并发工具类"><a href="#并发组件和并发工具类" class="header-anchor">#</a> 并发组件和并发工具类</h4> <ul><li>并发组件：线程池、阻塞队列、Future 和 FutureTask、Lock 和 Condition。</li> <li>并发工具：CountDownLatch、CyclicBarrier、Semaphore 和 Exchanger</li></ul> <h4 id="线程池"><a href="#线程池" class="header-anchor">#</a> 线程池</h4> <p>&lt;1&gt;为什么要用线程池</p> <p>线程池主要是控制运行的线程的数量，处理过程中将任务放入队列，然后再线程创建后启动这些任务；</p> <p>如果线程数量超过最大数量，超出数量的线程排队等候，等其他线程执行完毕，再从队列中取出任务来执行</p> <p>主要特点：线程复用，控制最大并发数，管理线程</p> <p>&lt;2&gt;创建线程（实现多线程）的四种方式</p> <ul><li>继承 Thread 类</li> <li>实现 Runnable 接口：无返回值，不抛异常，实现 run 方法</li> <li>实现 Callable 接口：有返回值，会抛异常，实现 call 方法</li> <li>通过线程池 (实际中最常用)
callable</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">101</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CallableDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">FutureTask</span> futureTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>futureTask<span class="token punctuation">,</span> <span class="token string">&quot;AA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>futureTask<span class="token punctuation">.</span><span class="token function">isDone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 等待线程执行完</span>

        <span class="token punctuation">}</span>
        <span class="token class-name">Integer</span> ret <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> futureTask<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取结果</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ret:&quot;</span> <span class="token operator">+</span> ret<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 101</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>&lt;3&gt;线程池框架：底层 ThreadPoolExecutor</p> <p>①ExecutorService threadPool = Executors.newFixedThreadPool(int); -- 池固定线程数</p> <p>②ExecutorService threadPool = Executors.newSingleThreadExecutor(); -- 池一个线程</p> <p>③ExecutorService threadPool = Executors.newCachedThreadPool(); -- 可扩容的，一池多线程</p> <p>上述三种工作中用那种？一个都不用，工具类封装好的有界队列长度过大；用 ThreadPoolExecutor 自己创建</p> <p>&lt;4&gt;线程池的 7 大重要参数</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token keyword">int</span> corePoolSize<span class="token punctuation">,</span>
                          <span class="token keyword">int</span> maximumPoolSize<span class="token punctuation">,</span>
                          <span class="token keyword">long</span> keepAliveTime<span class="token punctuation">,</span>
                          <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">,</span>
                          <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span> workQueue<span class="token punctuation">,</span>
                          <span class="token class-name">ThreadFactory</span> threadFactory<span class="token punctuation">,</span>
                          <span class="token class-name">RejectedExecutionHandler</span> handler<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol><li>corePoolSize : 线程池中的核心线程数</li> <li>maximumPoolSize ：线程池能够容纳同时执行的最大线程数</li> <li>keepAliveTime ： 多余的空闲线程的存活时间</li> <li>TimeUnit unit ： keepAliveTime 的单位</li> <li><code>BlockingQueue&lt;Runnable&gt; workQueue</code>：阻塞任务队列，被提交但尚未被执行的任务</li> <li>ThreadFactory threadFactory ：生成线程池中工作线程的线程工厂，用于创建线程，一般用默认的即可</li> <li>RejectedExecutionHandler handler ： 拒绝策略，当队列满了并且工作线程数大于等于线程池的最大线程池时触发</li></ol> <p>&lt;5&gt;线程池的底层工作原理</p> <p>比如银行办公窗口满了，阻塞队列也满了（候客区），这个时候需要扩容银行的加班窗口，扩容后新进来的会直接抢占新扩容的加班窗口，若任务还在持续增加，会启动饱和拒绝策略，若任务量下降（多余空闲线程的存活时间）会缩容</p> <p>&lt;6&gt;线程池的拒绝策略</p> <ul><li>AbortPolicy (默认)：直接抛出异常，阻止运行</li> <li>CallerRunsPolicy : 调用者运行机制</li> <li>DiscardOldestPolicy : 抛弃队列中等待最久的任务</li> <li>DiscardPolicy : 直接丢弃任务，不处理也不抛弃
自定义拒绝策略</li></ul> <p>&lt;7&gt;合理配置线程池</p> <p>CPU 密集型：CPU 核数+一个线程</p> <p>IO 密集型：</p> <p>① 任务线程并不是一直在执行任务，应配置尽可能多的线程，如 CPU 核数*2</p> <p>② 大部分线程都阻塞，需要多配置线程数，参考公式：CPU 核数 / (1 - 阻塞系数) -- 阻塞系数在 0.8-0.9 之间</p> <h4 id="阻塞队列"><a href="#阻塞队列" class="header-anchor">#</a> 阻塞队列</h4> <p>可以使拥挤的线程进行等待，避免任务拥挤造成失败（自己理解）</p> <p>多线程领域的阻塞，在某些情况下会挂起线程（阻塞），一旦条件满足，被挂起的线程又会自动被唤醒</p> <p>① 阻塞队列有没有好的一面：BlockingQueue 可以不用关心阻塞和唤醒，BlockingQueue 全包</p> <p>② 不得不阻塞，你如何管理</p> <ul><li>当阻塞队列是空时，从队列中获取元素的操作会被阻塞</li> <li>当阻塞队列是满时，往队列里添加元素的操作会被阻塞
以上可以理解为蛋糕店，蛋糕柜为空时，消费者阻塞，蛋糕柜满时，生产者阻塞</li></ul> <p>Collection 的实现类有 List 和 Queue</p> <p>③Queue 的实现类有：BlockingQueue 接口</p> <p>&lt;1&gt;ArrayBlockingQueue: 由数组结构组成的有界阻塞队列</p> <p>&lt;2&gt;LinkedBlockingQueue : 由链表组成的有界阻塞队列（大小默认 Integer.MAX_VAL）</p> <p>&lt;3&gt;PriorityBlockingQueue: 支持优先级排序的无界阻塞队列</p> <p>&lt;4&gt;DelayQueue : 使用优先级队列实现的延迟无界阻塞队列</p> <p>&lt;5&gt;SynchronousQueue: 不存储元素的阻塞队列，也即单个元素的队列</p> <p>&lt;6&gt;LinkedTransferQueue : 由链表结构组成的无界阻塞队列</p> <p>&lt;7&gt;LinkedBlockingDeque : 由链表结构组成的双向阻塞队列</p> <p>④ 阻塞队列的核心方法：ArrayBlockingQueue</p> <p>&lt;1&gt;返回异常：add(e), remove(), element()</p> <p>&lt;2&gt;返回特殊值：offer(e), poll(), peek() -- 成功：true;失败：false</p> <p>&lt;3&gt;阻塞：put(3), take()</p> <p>&lt;4&gt;超时退出：offer(e,time,unit),poll(time,unit)</p> <p>⑤ 阻塞队列用在哪里？</p> <p>Syncronized - ReentrantLock</p> <p>【注】多线程企业级模块口诀：线程操作资源类，判断-干活-唤醒通知，严防多线程状态下的虚假唤醒</p> <p>&lt;1&gt;生产者消费者模式</p> <p>&lt;2&gt;线程池</p> <p>&lt;3&gt;消息中间件：生产一个，消费一个</p> <p>⑥Syncronized-ReentrantLock 区别</p> <p>Syncronized: JVM 层面，java 关键字，底层 monitor，不需要手动释放</p> <p>不可中断，除非抛出异常或正常运行完成，非公平锁，要么唤醒一个线程，要么唤醒全部线程</p> <p>ReentrantLock: api 层面，类，需要手动释放，可中断，可设置超时方法也可在代码块中调用 interrupt 方法，默认非公平锁，构造方法传 true 为公平锁，可以用来实现分组唤醒需要的线程们（精准唤醒）</p> <p>练习：ABC 三个线程，A 打印 5 次，B 打印 10 次，C 打印 15 次，循环 3 次，按顺序</p> <p>生产消费队列代码</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * 资源类
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyResource</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token keyword">boolean</span> <span class="token constant">FLAG</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 默认开启生产者消费</span>
    <span class="token keyword">private</span> <span class="token class-name">AtomicInteger</span> atomicInteger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicInteger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> blockingQueue <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MyResource</span><span class="token punctuation">(</span><span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> blockingQueue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>blockingQueue <span class="token operator">=</span> blockingQueue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 生产者
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myProd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> retValue<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token constant">FLAG</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            data <span class="token operator">=</span> atomicInteger<span class="token punctuation">.</span><span class="token function">incrementAndGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            retValue <span class="token operator">=</span> blockingQueue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>retValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;生产一个蛋糕成功&quot;</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;生产一个蛋糕失败&quot;</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;线程停止了生产&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
     * 消费者
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> retValue<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token constant">FLAG</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            retValue <span class="token operator">=</span> blockingQueue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>retValue <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>retValue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token constant">FLAG</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;2s没有收到蛋糕停止&quot;</span> <span class="token operator">+</span> retValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;消费了一个蛋糕&quot;</span> <span class="token operator">+</span> retValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;main线程停止了生产&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h4 id="futuretask"><a href="#futuretask" class="header-anchor">#</a> FutureTask</h4> <h4 id="lock-和-condition"><a href="#lock-和-condition" class="header-anchor">#</a> Lock 和 Condition</h4> <p>LockSupport</p> <h4 id="并发工具类"><a href="#并发工具类" class="header-anchor">#</a> 并发工具类</h4> <p>①CountDownLatch : 秦灭六国一统华夏，线程减到 0 才执行主线程（减法）</p> <p>②CyclicBarrier : 集齐七龙珠，可以召唤神龙 （加法）</p> <p>③Semaphore：信号灯，多个线程抢多份资源，示例：抢车位</p> <p>作用：一个是用于多个共享资源的互斥使用，另一个用于并发线程数的控制</p> <h4 id="countdownlatch"><a href="#countdownlatch" class="header-anchor">#</a> CountDownLatch</h4> <ul><li>闭锁（倒计时锁），正数计数器，countDown()减操作，await()等待计数器到达 0</li> <li>控制线程执行的先后顺序</li> <li>实现原理：
<ul><li>维护内部类 Sync，Sync 继承自 AbstractQueuedSynchronizer</li> <li>AbstractQueuedSynchronizer 中有一个变量 private volatile int state;保证了 state 变量的可见性</li> <li>构造 Sync(state)执行 setState(state)操作</li> <li>await()等待的是 state == 0</li></ul></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
* 放学了，等待学生走完后，值日生开始值日
**/</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CountDownLatchDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> students <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
        <span class="token class-name">CountDownLatch</span> countDownLatch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CountDownLatch</span><span class="token punctuation">(</span>students<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> students<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;同学离开教室&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                countDownLatch<span class="token punctuation">.</span><span class="token function">countDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        countDownLatch<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;值日生开始值日&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="cyclicbarrier"><a href="#cyclicbarrier" class="header-anchor">#</a> CyclicBarrier</h4> <h4 id="semaphore"><a href="#semaphore" class="header-anchor">#</a> Semaphore</h4> <h4 id="死锁编码及定位分析"><a href="#死锁编码及定位分析" class="header-anchor">#</a> 死锁编码及定位分析</h4> <p>&lt;1&gt;产生死锁的原因：系统资源不足，进程运行推进的顺序不合适，资源分配不当</p> <p>&lt;2&gt;解决：jps 定位进程，jstack 找到死锁进程查看</p> <hr> <p>临界区</p> <p>​ 代码的一个区间，如果两个线程同时执行就有可能出问题，所以需要互斥锁来保护</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Obj</span><span class="token punctuation">{</span>
  <span class="token keyword">int</span> val <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> method <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 临界区 -- start</span>
    count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token comment">// 临界区 -- end</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>互斥锁</p> <p>广义上讲可以值所有实现互斥作用的同步机制。狭义上讲指的就是 mutex 这种特定的二元锁机制。</p> <p>互斥量</p> <p>保证同一时刻只有一个线程进入临界区代码片段的锁叫**“互斥量”**。</p> <p>信号量（semaphore）</p> <p>把互斥锁推广到&quot;N&quot;的空间，同时允许有 N 个线程进入临界区的锁叫**“信号量”**。</p> <p>一种更高级的同步机制，mutex 可以说是 semaphore 在仅取值 0/1 时的特例。Semaphore 可以有更多的取值空间，用来实现更加复杂的同步，而不单单是线程间互斥。</p> <p>自旋锁</p> <p>是一种互斥锁的实现方式而已，相比一般的互斥锁会在等待期间放弃 cpu，自旋锁（spinlock）则是不断循环并测试锁的状态，这样就一直占着 cpu。</p> <ul><li>一种有名的无锁算法,不使用锁的情况下实现多线程间变量的同步</li> <li>尝试获取锁的线程不会立即阻塞，而是反复尝试的去获得锁，好处是减少上下文切换的消耗，缺点是消耗 cpu</li> <li>是一种基于 CAS 的锁，此时比较并交换的类型变成了线程(Thread)</li></ul> <p>实现思想：</p> <p>AtomicInteger - &gt; getAndIncrement -&gt; unsafe.getAndAddInt</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Unsafe</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">getAndAddInt</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">,</span> <span class="token keyword">long</span> offset<span class="token punctuation">,</span> <span class="token keyword">int</span> delta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> v<span class="token punctuation">;</span>
  <span class="token keyword">do</span> <span class="token punctuation">{</span>
    v <span class="token operator">=</span> <span class="token function">getIntVolatile</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> offset<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">weakCompareAndSetInt</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> v<span class="token punctuation">,</span> v <span class="token operator">+</span> delta<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> v<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr> <p>竞态条件：即多个线程同时读写某个字段</p> <p>竞态资源：竞态条件下多线程争抢的资源</p> <p>轮询忙等</p> <p>锁变量</p> <p>原子性</p> <p>TSL 指令：原子性地完成“检查-占锁”的动作。</p> <p>阻塞</p> <p>睡眠</p> <p>唤醒</p> <p>管程：把互斥量交给程序员使用太危险，有些编程语言实现了**“管程”**的特性，从编译器的层面保证了临界区的互斥，比如 Java 的 synchronized 关键字。</p> <p>最后，不要钻这些名词的牛角尖，更重要的是理解这些东西背后的原理，叫什么名字并没有什么好说的。这些东西在不同的语言和平台上又有可能会有不同的叫法，其实本质上就这么回事。</p> <hr> <p>ReentrantReadWriteLock 读写锁; <strong>读读共享、写写互斥、读写互斥、写读互斥</strong></p> <hr> <hr> <h2 id="java-运行时内存结构"><a href="#java-运行时内存结构" class="header-anchor">#</a> Java 运行时内存结构</h2> <p>![2021-06-21 am9.49.59](https://muyids.oss-cn-beijing.aliyuncs.com/2021-06-21 am9.49.59-4240218.png)</p> <p>红色区域是各个线程独有的，不会出现线程安全问题；而蓝色区域是线程共享的，其中 java 堆区存放的是对象，方法区存放的是类信息、常量、静态变量等数据，当多个线程在竞争其中一些数据时，需要锁机制对其进行限制。</p> <h2 id="简述-jvm-对象、对象头信息"><a href="#简述-jvm-对象、对象头信息" class="header-anchor">#</a> 简述 JVM 对象、对象头信息</h2> <p>![2021-06-21 am10.06.32](https://muyids.oss-cn-beijing.aliyuncs.com/2021-06-21 am10.06.32.png)</p> <p>常用的 Hotspot 虚拟机中，对象在内存中布局实际包含 3 个部分：</p> <ul><li>对象头</li> <li>实例数据</li> <li>对齐填充</li></ul> <p><img src="https://muyids.oss-cn-beijing.aliyuncs.com/v2-bb7e2989c375f870122a61fcf8b9cf79_1440w.jpg" alt="img"></p> <p>对象头包含两部分：</p> <ul><li>对象自身运行时所需的数据（Mark Word)：包含对象的 hashcode、分代年龄、轻量级锁指针、重量级锁指针、GC 标记、偏向锁线程 ID、偏向锁时间戳</li> <li>存储类型指针（Class Pointer）：指向类的元数据的指针，保存了当前对象类型所在方法区中的类型数据</li> <li>如果是数组的话，还包含数组长度</li></ul> <p>![2021-06-21 am10.09.30](https://muyids.oss-cn-beijing.aliyuncs.com/2021-06-21 am10.09.30.png)</p> <p>锁的四种状态：无锁、偏向锁、轻量级锁、重量级锁</p> <ul><li><p>无锁</p> <p>无锁的情况，性能是最高的</p> <p>&lt;1&gt;无竞争</p> <p>&lt;2&gt;存在竞争，非锁方式同步线程 CAS</p></li> <li><p>偏向锁</p> <p>对象认识这个线程，这个对象的锁偏爱这个线程（不需要线程切换，效率较高）</p> <p>实现方式：通过锁标志位 01，判断是否偏向锁 1， 读取前 23 位 线程 ID 确认当前想要获得对象锁的线程</p> <p>如果当前不仅有一个线程想要获取该对象，会升级为轻量级锁</p></li> <li><p>轻量级锁</p> <p>&lt;1&gt;当一个线程想要获取某个对象的锁时，假如看到锁标志位为 00， 那么就知道是 轻量级锁</p> <p>&lt;2&gt;这时，线程会在自己的<strong>线程虚拟机栈</strong>中开辟一块 <strong>Lock Record</strong> 空间； Lock Record 存放的是 Mark Word 的副本、owner 对象的指针（指向该对象）；对象头前 30bit 记录了指向 Lock Record 的指针；完成了线程和对象的绑定，线程抢到了该对象的锁；</p> <p>&lt;3&gt;其他线程也想要获取该对象怎么办？</p> <p>自旋等待。</p></li> <li><p>重量级锁</p> <p>自旋等待的线程数超过 1 个，轻量级锁升级为重量级锁，通过 monitor 对线程进行管控；</p></li></ul> <hr> <hr> <h2 id="悲观锁"><a href="#悲观锁" class="header-anchor">#</a> <strong>悲观锁</strong></h2> <ul><li>悲观锁是就是悲观思想，即认为<strong>写多</strong>，遇到<strong>并发写的可能性高</strong></li> <li>每次去拿数据的时候都认为别人会修改，所以每次在读写数据的时候都会上锁，这样别人想读写这个数据就会 block 直到拿到锁</li> <li>java 中的悲观锁就是 Synchronized。AQS 框架下的锁则是先尝试 cas 乐观锁去获取锁，获取不到，才会转换为悲观锁，如 RetreenLock。</li></ul> <p>悲观锁 使用 互斥锁来实现，性能很低</p> <h2 id="乐观锁"><a href="#乐观锁" class="header-anchor">#</a> <strong>乐观锁</strong></h2> <ul><li>乐观锁是一种乐观思想，即认为<strong>读多写少</strong>，遇到并发写的可能性低</li> <li>每次去拿数据的时候都认为别人不会修改，所以不会上锁，但是在更新的时候会判断一下在此期间别人有没有去更新这个数据，采取在写时先读出当前版本号，然后加锁操作（比较跟上一次的版本号，如果一样则更新），如果失败则要重复读-比较-写的操作。</li> <li>java 中的乐观锁基本都是通过 <strong>CAS 操作</strong> 实现的，CAS 是一种更新的原子操作，比较当前值跟传入值是否一样，一样则更新，否则失败。</li></ul> <h2 id="用过-aqs-吗-有具体的例子可以说说吗"><a href="#用过-aqs-吗-有具体的例子可以说说吗" class="header-anchor">#</a> 用过 AQS 吗，有具体的例子可以说说吗</h2> <p>AQS: AbstractQueuedSynchronizer (java.util.concurrent.locks)</p> <p>AQS 成员变量：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">/**
     * Head of the wait queue, lazily initialized.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">transient</span> <span class="token keyword">volatile</span> <span class="token class-name">Node</span> head<span class="token punctuation">;</span>

    <span class="token comment">/**
     * Tail of the wait queue. After initialization, modified only via casTail.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">transient</span> <span class="token keyword">volatile</span> <span class="token class-name">Node</span> tail<span class="token punctuation">;</span>
    <span class="token comment">/**
     * The synchronization state.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token keyword">int</span> state<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="看过-juc-源码吗-聊一聊具体实现吧"><a href="#看过-juc-源码吗-聊一聊具体实现吧" class="header-anchor">#</a> 看过 JUC 源码吗，聊一聊具体实现吧</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">// Unsafe.java</span>
		<span class="token annotation punctuation">@HotSpotIntrinsicCandidate</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">getAndAddInt</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">,</span> <span class="token keyword">long</span> offset<span class="token punctuation">,</span> <span class="token keyword">int</span> delta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> v<span class="token punctuation">;</span>
        <span class="token keyword">do</span> <span class="token punctuation">{</span>
            v <span class="token operator">=</span> <span class="token function">getIntVolatile</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> offset<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">weakCompareAndSetInt</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> v<span class="token punctuation">,</span> v <span class="token operator">+</span> delta<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 自旋操作</span>
        <span class="token keyword">return</span> v<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
		<span class="token comment">// native根据不同平台调用不同C++代码</span>
    <span class="token comment">/**
     * Atomically updates Java variable to {@code x} if it is currently
     * holding {@code expected}.
     *
     * &lt;p&gt;This operation has memory semantics of a {@code volatile} read
     * and write.  Corresponds to C11 atomic_compare_exchange_strong.
     *
     * @return {@code true} if successful
     */</span>
    <span class="token annotation punctuation">@HotSpotIntrinsicCandidate</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">native</span> <span class="token keyword">boolean</span> <span class="token function">compareAndSetInt</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">,</span> <span class="token keyword">long</span> offset<span class="token punctuation">,</span>
                                                 <span class="token keyword">int</span> expected<span class="token punctuation">,</span>
                                                 <span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="reentrantlock"><a href="#reentrantlock" class="header-anchor">#</a> ReentrantLock</h3> <ul><li>ReentrantLock 基于 AQS(<strong>AbstractQueuedSynchronizer 抽象队列同步器</strong>)实现</li> <li>AQS 原理
<ul><li>AQS 内部维护一个 state 状态位，尝试加锁的时候通过 CAS 修改值</li> <li>如果 state 置为 1，且当前线程 ID 赋值，代表加锁成功</li> <li>一旦获取锁，其他线程进入阻塞队列自旋</li> <li>释放锁：唤醒阻塞队列中的线程，state 置为 0，线程 ID 置空
<img src="https://muyids.oss-cn-beijing.aliyuncs.com/v2-b4ff47cd91144a6c0301511312bb72ff_1440w.jpg" alt="img"></li></ul></li></ul> <p><strong>synchronized 和 RetreenLock 锁区别</strong></p> <p>现在基本都是用 JDK7 和 JDK8 的版本，ReentrantLock 的效率和 synchronized 区别基本可以持平了，区别如下：</p> <ul><li>synchronized 是 java 关键字，RetreenLock 是个 java 类</li> <li>ReentrantLock 需要显式的获取锁和释放锁</li> <li>等待可中断；持有锁的线程长时间不释放，等待中的线程可以放弃等待</li> <li>公平锁：synchronized 和 ReentrantLock 默认都是非公平锁；ReentrantLock 可以通过构造函数传参改变。只不过使用公平锁的话会导致性能急剧下降。</li> <li>绑定多个条件：ReentrantLock 可以同时绑定多个 Condition 条件对象。</li> <li>synchronized 无法获取锁状态，RetreenLock 可以判断是否持有锁</li> <li>synchronized 不可重入，不可中断，而 RetreenLock 可重入，可中断</li></ul> <hr> <ol><li>创建线程有哪几种方式？（a.继承 Thread 类;b.实现 Runnable 接口;c. 使用 Executor 框架;d.使用 FutureTask）</li> <li>说说 <code>sleep()</code> 方法和 <code>wait()</code> 方法区别和共同点?</li> <li>Java 内存模型（JMM）、重排序与 happens-before 原则了解吗？</li> <li><code>synchronized</code> 关键字、volatile 关键字</li> <li><code>ThreadLocal</code> 有啥用（解决了什么问题）？怎么用？原理了解吗？内存泄露问题了解吗？</li> <li>为什么要用线程池？<code>ThreadPoolExecutor</code> 类的重要参数了解吗？<code>ThreadPoolExecutor</code> 饱和策略了解吗？线程池原理了解吗？几种常见的线程池了解吗？为什么不推荐使用<code>FixedThreadPool</code>？如何设置线程池的大小？</li> <li>AQS 了解么？原理？AQS 常用组件：<code>Semaphore</code> (信号量)、<code>CountDownLatch</code> （倒计时器） <code>CyclicBarrier</code>(循环栅栏)</li> <li><code>ReentrantLock</code> 、 <code>ReentrantReadWriteLock</code> 、<code>StampedLock</code>（JDK8）</li> <li>CAS 了解么？原理？</li> <li>Atomic 原子类</li> <li>并发容器：<code>ConcurrentHashMap</code> 、 <code>CopyOnWriteArrayList</code> 、 <code>ConcurrentLinkedQueue</code> <code>BlockingQueue</code> 、<code>ConcurrentSkipListMap</code></li> <li><code>Future</code> 和 <code>CompletableFuture</code></li> <li>......</li></ol> <hr> <p>线程</p> <ul><li>基础</li> <li>互斥</li> <li>同步</li></ul> <p>JUC 包</p> <p>​ 道格李</p> <p>​ 锁</p> <p>AQS</p> <p>​ JUC 包的核心</p> <p>​ Java 并发编程的核心</p> <p>AQS:抽象队列同步器</p> <p>并发编程问的比较多的，volatile, syncronize, AQS, ReentrantLock</p> <p>六个操作：</p> <p>&lt;1&gt;抢锁</p> <ol><li><p>看锁的标志位，默认是 0，这时候有线程抢到锁，修改锁的标志位</p> <p>用到了 CAS 机制</p></li> <li><p>有线程占有了锁，这时候有线程来抢锁</p> <ol><li><p>当前来抢锁的线程是不是占有锁的线程</p> <p>是，重入，state+1</p> <p>为什么要记录次数？因为释放的时候需要释放对应 的次数</p></li> <li><p>如果不是，抢锁失败</p></li></ol></li> <li><p>优化：看等待区有没有人，如果有人，锁肯定被占用了</p> <p>如何判断有人在等待？</p> <p>hasQueuedPredecessors</p></li></ol> <p>公平锁、非公平锁存在差异的地方</p> <p>唯一的差别就是一个临界区:</p> <p>&lt;2&gt;释放锁</p> <p>&lt;3&gt;入队</p> <ol><li><p>队列中有没有节点</p> <p>没有</p> <ol><li><p>正常队列</p> <ol><li>生成一个节点</li></ol></li> <li><p>AQS 队列</p> <p>生成两个节点</p></li></ol> <p>有</p> <p>​ 尾部插入</p> <p>中部插入</p> <p>​ AQS 中是不存在这个情况的</p></li></ol> <p>&lt;4&gt;出队</p> <p>&lt;5&gt;阻塞</p> <p>&lt;6&gt;唤醒</p> <p>CLH 算法：</p> <p>​ 自旋锁算法</p> <p>队列</p> <ul><li>AQS 式的队列</li> <li>普通的队列</li></ul> <hr> <p>ReentrantLock</p> <p>底层是 AQS</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks<span class="token punctuation">.</span></span><span class="token class-name">ReentrantLock</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadTest_01</span> <span class="token punctuation">{</span>

    <span class="token keyword">static</span> <span class="token keyword">int</span> val <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">ReentrantLock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> d <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> d <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> d<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                val<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t3<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            t2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            t3<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>公平锁 &amp; 非公平锁</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 非公平锁</span>
<span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// 公平锁</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>差别？</p> <p>解决问题的思路：</p> <p>场景：银行办业务</p> <p>1、看办理的人多不多，不多就直接去柜台，多就排队</p> <p>2、等待区</p> <p>3、如果行长小舅子来办业务，不需要排队，柜台空了就直接去办</p> <p>​ 非公平锁</p> <p>4、过号了，重排</p> <p>AQS 代码分析：https://www.bilibili.com/video/BV1pz4y1U7JS/</p> <hr> <p>nodejs 多线程编程</p> <p>简单的多线程</p> <p>nodejs 是单线程模型，怎么利用 cpu 的多核优势呢？比如我们有 100 万个任务，CPU 是 32 核，如何多线程执行任务</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">asyncMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cpu<span class="token punctuation">.</span>nums<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">asyncMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>多线程通信</p> <p>一旦涉及到多线程，那么线程间同步就必不可少，否则无法解决临界区的问题</p> <p>多线程间的同步一般需要依赖锁，而锁的实现需要依赖于全局变量。</p> <hr> <p>JUC</p> <p>Java.util.concurrent</p> <h3 id="进程和线程"><a href="#进程和线程" class="header-anchor">#</a> 进程和线程</h3> <p>概念：</p> <p>进程：一个程序就是一个进程</p> <p>线程：操作系统运算调度的最小单位</p> <p>线程的状态：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public enum State {
	NEW,
	RUNNABLE,
	BLOCKED,
	WAITING,
	TIMED_WAITING,
	TERMINATED;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>wait 和 sleep 的区别：</p> <ul><li>sleep 是 Thread 的静态方法，wait 是 Object 的方法，任何对象实例都能调用</li> <li>sleep 不会释放锁，他也不需要占用锁；wait 会释放锁，但调用他的前提是当前线程占有锁（即代码再 synchronized 中）</li> <li>都可以被 interrupted 方法中断</li></ul> <p>并发和并行</p> <p>并行：同一时刻多个指令同时执行</p> <p>并发：同一时刻只有一条指令执行</p> <p>管程：</p> <ul><li>Monitor 监视器 -&gt; 锁</li> <li>是一种同步机制，保证同一时间，只有一个线程访问被保护的资源</li> <li>jvm 同步进入和退出，使用管程对象实现</li></ul> <p>用户线程和守护线程</p> <ul><li>用户线程：自定义线程</li> <li>守护线程：后台线程，比如垃圾回收</li></ul> <h2 id="lock-接口"><a href="#lock-接口" class="header-anchor">#</a> Lock 接口</h2> <p>synchronized 作用范围：</p> <p>多线程编程步骤：</p> <ol><li>创建资源类，在资源类创建属性和操作方法</li> <li>创建多个线程，调用资源类的操作方法</li> <li></li></ol> <hr> <ol><li><p>什么是线程和进程? 线程与进程的关系,区别及优缺点？</p> <p>A:</p> <p>进程：应用程序在内存中分配的空间，也就是正在运行的程序；</p> <p>线程：一个进程可能有多个线程，每个线程负责一个单独的子任务</p> <p>区别：</p> <ol><li>进程是操作系统进行资源分配的基本单位，线程是操作系统 CPU 调度的基本单位</li> <li>进程占有独立的内存空间
<ul><li>进程间内存隔离，数据共享复杂但同步简单，各进程互不干扰；线程共享进程的内存空间，数据共享简单但同步复杂</li> <li>一个进程出现问题不会影响其他进程，可靠性高；一个线程出问题，可能影响整个进程，可靠性低</li> <li>进程开销大，创建和销毁不仅需要保存寄存器和栈信息，还需要资源的分配回收和调度；线程只需要保存寄存器和栈信息，开销小；</li></ul></li></ol></li> <li><p>说说并发与并行的区别?</p></li> <li><p>为什么要使用多线程呢?</p></li> <li><p>使用多线程可能带来什么问题?（内存泄漏、死锁、线程不安全等等）</p></li> <li><p>说说线程的生命周期和状态?</p></li> <li><p>什么是上下文切换?</p> <p>A: CPU 采用时间片轮转的方式运行进程：CPU 为每个进程分配一个时间段，称作它的时间片。如果时间片结束时，进程还在运行，则暂停这个进程的运行，并且 CPU 分配给另一个进程（这个过程叫做上下文切换）；如果进程在时间片结束前阻塞或结束，则 CPU 立即进行切换，不用等时间片用完。</p></li> <li><p>什么是线程死锁?如何避免死锁?</p></li></ol> <hr> <p>上课时间：20：00 主讲老师：马士兵</p> <p>1、为什么早期计算机只有进程没有线程？
2、进程、线程、协程的区别是什么？
3、现代 CPU 架构给多线程编程带来了哪些挑战？
4、三级缓存架构造成的可见性问题如何解决？
5、内存屏障是如何解决代码乱序性问题的？
6、为什么阿里京东都喜欢问 JUC？
7、
8、
9、有哪些同步队列可以用于线程池？
10、Exchanger 交换器适用于什么场景？
11、各种同步器在大厂面试中的综合运用怎么做？</p> <p>首次公开：从 CPU 架构的角度理解底层高并发的构成。 上课链接：https://ke.qq.com/course/399017?taid=10573088496686761&amp;tuin=a028e035</p> <p>优惠活动倒计时 2 天，报名预定私聊小姐姐</p> <hr> <p>图灵--周瑜老师新课带你快速掌握</p> <p>---重磅来袭 ReentrantLock 底层原理与源码深度解析</p> <p>1、公平锁与非公平锁原理解析
2、AQS 底层原理与源码深度分析
3、利用自旋锁与 park 实现一把锁
4、加锁方法底层源码逐行讲解
5、解锁方法底层源码逐行讲解
6、总结公平锁与非公平锁真正的区别
7、CountDownLatch 底层原理源码分析
8、Semaphore 底层原理源码分析</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.39affee4.js" defer></script><script src="/assets/js/2.ff5713a3.js" defer></script><script src="/assets/js/152.3520b0c9.js" defer></script>
  </body>
</html>
